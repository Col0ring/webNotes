# dart

## 1.å®‰è£…ä¸ä½¿ç”¨

### 1.1 å®‰è£…

**å› ä¸ºå­¦ä¹  dart å¤§å¤šæ•°æ˜¯ä¸ºäº†å†™ flutterï¼Œæ‰€ä»¥æ¨èç›´æ¥ä¸‹è½½ flutterï¼Œä¸‹è½½çš„ flutter ä¸­ä¼šå¸¦æœ‰ dart çš„ SDK**ã€‚

flutter æ¨èå»å®˜ç½‘è¿›è¡Œ[ä¸‹è½½](https://flutter.dev/docs/development/tools/sdk/releases)ã€‚ä¸‹è½½å®Œæˆåè§£å‹ï¼Œdart çš„ SDK å°±åœ¨`è§£å‹ç›®å½•\bin\cache\dart-sdk\`ä¸‹ã€‚



### 1.2 åœ¨ vscode ä¸­ä½¿ç”¨

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°† dart çš„ SDK è®¾ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œå°†`è§£å‹ç›®å½•\bin\cache\dart-sdk\bin`çš„å®Œæ•´è·¯å¾„è®¾ç½®å¥½ï¼Œåœ¨cmd ä¸­è¾“å…¥ dart ï¼Œæœ‰å“åº”å°±ä»£è¡¨è®¾ç½®æˆåŠŸäº†ã€‚

ç„¶åå°±æ˜¯å¦‚ä½•åœ¨ vscode ä¸­ä½¿ç”¨dartã€‚ä¸ºäº†ä½¿ç”¨ dartï¼Œæˆ‘éœ€è¦ä¸‹è½½ä¸¤ä¸ªæ’ä»¶`Dart`å’Œ`Code Runner`ï¼Œä¸‹è½½å®Œæˆååˆ›å»ºä¸€ä¸ªæ–‡ä»¶`main.dart`ï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç ï¼š

```dart
// dartä¸­çš„ä»£ç éœ€è¦æ”¾å…¥mainæ–¹æ³•ä¸­æ‰§è¡Œ
main(){
    print('Hello World');
}
```

ç„¶åå³é”®`Run Code`,å¦‚æœæ§åˆ¶å°æˆåŠŸæ‰“å°å‡º`Hello World`è¯æ˜æˆ‘ä»¬å·²ç»èƒ½å¤Ÿåœ¨ vscode ä¸­ä½¿ç”¨ dart äº†ã€‚



## 2.ç±»å‹å£°æ˜

### 2.1 å˜é‡å£°æ˜

åœ¨ dart ä¸­æœ‰å¾ˆå¤šå£°æ˜å˜é‡çš„å…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨èƒ½æ¥å—ä»»ä½•ç±»å‹å€¼çš„å˜é‡ç”³æ˜ï¼ˆç±»ä¼¼ JavaScriptï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åªèƒ½æ¥å—å›ºå®šç±»å‹å€¼çš„å˜é‡å£°æ˜ï¼ˆç±»ä¼¼ JAVAï¼‰ã€‚

#### 2.1.1 var

ç±»ä¼¼äºJavaScriptä¸­çš„`var`ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä»»ä½•ç±»å‹çš„å˜é‡ï¼Œä½†æœ€å¤§çš„ä¸åŒæ˜¯ dart ä¸­`var`å˜é‡ä¸€æ—¦åœ¨å£°æ˜æ—¶è¢«èµ‹å€¼ï¼ˆé™¤äº†è¢«èµ‹å€¼ä¸º nullï¼Œå› ä¸ºåˆå§‹åŒ–çš„æ—¶å€™æ‰€æœ‰çš„å€¼éƒ½ä¸º nullï¼‰ï¼Œç±»å‹ä¾¿ä¼šç¡®å®šï¼Œåˆ™ä¸èƒ½å†æ”¹å˜å…¶ç±»å‹ï¼Œå¦‚ï¼š

```dart
var t = "hi world";
// ä¸‹é¢ä»£ç åœ¨dartä¸­ä¼šæŠ¥é”™ï¼Œå› ä¸ºå˜é‡tçš„ç±»å‹å·²ç»ç¡®å®šä¸ºString
// ç±»å‹ä¸€æ—¦ç¡®å®šååˆ™ä¸èƒ½å†æ›´æ”¹å…¶ç±»å‹
t = 1000;
```

**æ³¨ï¼š**å¯¹äºå‰ç«¯äººå‘˜æ¥è¯´ï¼Œå…¶å®çœ‹ä½œæ˜¯ TypeScript çš„è‡ªåŠ¨æ¨æ–­ç±»å‹çš„åŠŸèƒ½å°±å¥½ã€‚

ä½†æ˜¯å¦‚æœä¸€å¼€å§‹æ²¡æœ‰ç›´æ¥èµ‹å€¼ï¼Œè€Œæ˜¯åªå®šä¹‰ï¼Œé‚£ä¹ˆå˜é‡çš„ç±»å‹é»˜è®¤ä¼šæ˜¯`dynamic`ç±»å‹ï¼Œä¹Ÿå°±è¯´å’Œ JavaScript ä¸­çš„å£°æ˜çš„å˜é‡ä¸€æ ·çš„ç”¨æ³•äº†ã€‚

```dart
var t;
t = "hi world";
// ä¸‹é¢ä»£ç åœ¨dartä¸­ä¸ä¼šæŠ¥é”™
t = 1000;
```



#### 2.1.2 const å’Œ final

**å¦‚æœä»æœªæ‰“ç®—æ›´æ”¹ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆä½¿ç”¨ `final` æˆ– `const`ï¼Œä¸æ˜¯`var`ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç±»å‹å£°æ˜**ï¼ˆç±»å‹å£°æ˜ä¹Ÿæ˜¯å¯ä»¥æ›´æ”¹å€¼çš„ï¼Œå½“ä½¿ç”¨ç±»å‹å£°æ˜å®šä¹‰å˜é‡æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨å‰é¢åŠ ä¸Š`const`æˆ–`final`å…³é”®å­—ä½¿å…¶å˜æˆå¸¸é‡ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬å»ºè®®çœç•¥ç±»å‹å£°æ˜ï¼‰ã€‚

**ä½¿ç”¨`const`å’Œ`final`å£°æ˜çš„å˜é‡éƒ½åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡**ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºï¼š

**`const`å¸¸é‡æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ï¼ˆå°±æ˜¯è¯´å¿…é¡»è¦æ˜¯ä¸€ä¸ªåœ¨ç¨‹åºç¼–è¯‘æ—¶å°±å®Œå…¨å›ºå®šçš„å¸¸é‡ï¼‰ï¼Œ`final`å¸¸é‡ä¸ä»…æœ‰`const`çš„ç¼–è¯‘æ—¶å¸¸é‡çš„ç‰¹æ€§ï¼Œæœ€é‡è¦çš„æ˜¯å®ƒæ˜¯è¿è¡Œæ—¶å¸¸é‡ï¼Œ`final`æ˜¯æƒ°æ€§åˆå§‹åŒ–çš„ï¼Œå³åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰ä¼šåˆå§‹åŒ–ã€‚**

```dart
// å¯ä»¥çœç•¥Stringè¿™ä¸ªç±»å‹å£°æ˜
final str = "hi world";
final String sstr = "hi world"; 
const str1 = "hi world";
const String sstr1 = "hi world";

// è¿è¡Œæ—¶å¸¸é‡åœ¨è¿è¡Œæ—¶æ‰ä¼šè¢«èµ‹å€¼
// è·å–å½“å‰æ—¶é—´ï¼Œå› ä¸ºæ˜¯åŠ¨æ€è·å–çš„ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡constå£°æ˜
final t = new DateTime.now(); // OK
const t1 = new DateTime.now(); // Error
```

**æ³¨æ„ï¼š**

- è™½ç„¶ final æ˜¯è¿è¡Œæ—¶å¸¸é‡ï¼Œç¬¬ä¸€æ¬¡è¢«èµ‹å€¼ä¹Ÿå¿…é¡»æ˜¯åœ¨å®šä¹‰çš„æ—¶å€™èµ‹å€¼ã€‚

  ```dart
  final a; // Error
  a = 1;
  ```

- å®ä¾‹å˜é‡å¯ä»¥æ˜¯ finalï¼Œä½†ä¸èƒ½æ˜¯ constã€‚ï¼ˆå®ä¾‹å˜é‡å®šä¹‰åœ¨å¯¹è±¡ä¸€çº§ï¼Œå®ƒå¯ä»¥è¢«ç±»ä¸­çš„ä»»ä½•æ–¹æ³•æˆ–è€…å…¶ä»–ç±»ä¸­çš„æ–¹æ³•è®¿é—®ï¼Œä½†æ˜¯ä¸èƒ½è¢«é™æ€æ–¹æ³•è®¿é—®ï¼‰

  ```dart
  class A {}
  main() {
      final a = new A(); // OK
      const b = new A(); // Error 
  }
  ```

- const å…³é”®å­—ä¸åªæ˜¯å£°æ˜å¸¸é‡å˜é‡ã€‚è¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œä»¥åŠå£°æ˜åˆ›å»ºå¸¸é‡å€¼çš„æ„é€ å‡½æ•°ã€‚ä»»ä½•å˜é‡éƒ½å¯ä»¥èµ‹ä¸€ä¸ªå¸¸é‡å€¼ã€‚

  ```dart
  var foo = const [];
  final bar = const [];
  
  // å¯ä»¥ä»constå£°æ˜çš„åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­çœç•¥const
  const baz = []; // Equivalent to `const []` => const bar = const [];
  // ä¸èƒ½æ”¹å˜constå˜é‡çš„å€¼
  baz = [42]; // Error: Constant variables can't be assigned a value.
  // å¯ä»¥æ›´æ”¹ä¸€ä¸ªéfinalçš„éconstå˜é‡çš„å€¼ï¼Œå³ä½¿å®ƒæ›¾ç»æœ‰ä¸€ä¸ªconstå€¼
  foo = [1, 2, 3]; // Was const []
  ```

- æœ‰äº›ç±»æä¾›å¸¸é‡æ„é€ å‡½æ•°ã€‚è¦ä½¿ç”¨å¸¸é‡æ„é€ å‡½æ•°åˆ›å»ºç¼–è¯‘æ—¶å¸¸é‡ï¼Œè¯·å°† const å…³é”®å­—æ”¾åœ¨æ„é€ å‡½æ•°åä¹‹å‰ï¼š

  ```dart
  class Person{
      const Person();
  }
  var p = const Person();
  ```



#### 2.1.3 dynamic å’Œ Object

- `Object` æ˜¯ dart æ‰€æœ‰å¯¹è±¡çš„æ ¹åŸºç±»ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰ç±»å‹éƒ½æ˜¯`Object`çš„å­ç±»ï¼ˆåŒ…æ‹¬`Function`å’Œ`Null`ï¼‰ï¼Œæ‰€ä»¥ä»»ä½•ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥èµ‹å€¼ç»™`Object`å£°æ˜çš„å¯¹è±¡ã€‚
- `dynamic`æ˜¯ä¸`int`è¿™æ ·ä¸€æ ·çš„ç±»å‹å…³é”®è¯ï¼Œæ”¹ç±»å‹å£°æ˜çš„å˜é‡ä¹Ÿå¯ä»¥èµ‹å€¼ä»»æ„å¯¹è±¡ã€‚

**`dynamic`ä¸`Object`ç›¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬å£°æ˜çš„å˜é‡å¯ä»¥åœ¨åæœŸæ”¹å˜èµ‹å€¼ç±»å‹ï¼ˆç±»ä¼¼ä½¿ç”¨ JavaScript æˆ– TypeScript ä¸­çš„`any`ç±»å‹ï¼‰ã€‚**

```dart
dynamic t;
Object x;
t = "hi world";
x = 'Hello Object';
// ä¸‹é¢ä»£ç æ²¡æœ‰é—®é¢˜
t = 1000;
x = 1000;
```

`dynamic`ä¸`Object`ä¸åŒçš„æ˜¯ï¼Œ`dynamic`å£°æ˜çš„å¯¹è±¡ç¼–è¯‘å™¨ä¼šæä¾›æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼ˆä¹Ÿå°±æ˜¯ç›¸å½“äºå°±æ˜¯å®Œå®Œå…¨å…¨çš„ JavaScriptå˜é‡ï¼‰ï¼Œè€Œ`Object`å£°æ˜çš„å¯¹è±¡åªèƒ½ä½¿ç”¨ Object ç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚

```dart
dynamic a;
Object b;
main() {
    a = "";
    b = "";
    printLengths();
}   

printLengths() {
    // no warning
    print(a.length);
    // warning:
    // The getter 'length' is not defined for the class 'Object'
    print(b.length);
}
```



#### 2.1.4 é»˜è®¤å€¼

æœªåˆå§‹åŒ–çš„å˜é‡çš„åˆå§‹å€¼ä¸º nullã€‚ç”šè‡³å…·æœ‰æ•°å­—ç±»å‹çš„å˜é‡æœ€åˆä¹Ÿæ˜¯ nullï¼Œå› ä¸ºåœ¨ dart ä¸­æ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ã€‚

```dart
int lineCount;
assert(lineCount == null);
```

**æ³¨æ„ï¼š**åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ`assert()`è°ƒç”¨è¢«å¿½ç•¥ã€‚åœ¨å¼€å‘ç¯å¢ƒä¸­å½“`assert(condition)`çš„ condition æ¡ä»¶ä¸ä¸ºçœŸæ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚



### 2.2 å†…å»ºç±»å‹

**æˆ‘ä»¬è¦æ¸…æ¥šçš„æ˜¯ï¼Œdart ä¸­çš„æ‰€æœ‰ç±»å‹çš„å€¼å…¨éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨å…¶ä»–è¯­è¨€ä¸­å¸¸ç”¨çš„åŸºæœ¬ç±»å‹å£°æ˜åœ¨ dart ä¸­å®è´¨ä¹Ÿæ˜¯ç±»çš„ç±»å‹å£°æ˜ã€‚**

#### 2.2.1 Number

**Number æ€»å…±èƒ½ä½¿ç”¨ä¸‰ç§ç±»å‹ï¼š**

- **num**
- **int**
- **double**

**Dartçš„æ•°å­—æœ‰ä¸¤ç§å½¢å¼ï¼š**

- **int**ï¼šæ ¹æ®å¹³å°çš„ä¸åŒï¼Œæ•´æ•°å€¼ä¸å¤§äº64ä½ã€‚åœ¨ Dart VM ä¸Šï¼Œå€¼å¯ä»¥ä»`-263`åˆ°`263 - 1`ã€‚ç¼–è¯‘æˆ JavaScript çš„ Dart ä½¿ç”¨ JavaScript ä»£ç ï¼Œå…è®¸å€¼ä»`-253`åˆ°`253 - 1`ã€‚

  æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°ç‚¹çš„æ•°ã€‚è¿™é‡Œæœ‰ä¸€äº›å®šä¹‰æ•´æ•°å­—é¢é‡çš„ä¾‹å­ï¼š

  ```dart
  int x = 1;
  int hex = 0xDEADBEEF;
  ```

  int ç±»å‹æŒ‡å®šä¼ ç»Ÿçš„`(<<ï¼Œ >>)å’Œ(&)ï¼Œæˆ–(|)`ä½æ“ä½œç¬¦ã€‚ä¾‹å¦‚ï¼š

  ```dart
  assert((3 << 1) == 6); // 0011 << 1 == 0110
  assert((3 >> 1) == 1); // 0011 >> 1 == 0001
  assert((3 | 4) == 7); // 0011 | 0100 == 0111
  ```

- **double**ï¼š64ä½(åŒç²¾åº¦)æµ®ç‚¹æ•°ï¼Œç”±IEEE 754æ ‡å‡†æŒ‡å®šã€‚

  å¦‚æœä¸€ä¸ªæ•°å­—åŒ…å«ä¸€ä¸ªå°æ•°ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªåŒç²¾åº¦æ•°ã€‚è¿™é‡Œæœ‰ä¸€äº›å®šä¹‰åŒç²¾å­—é¢é‡çš„ä¾‹å­ï¼š

  ```dart
  double y = 1.1;
  double exponents = 1.42e5;
  ```

**æ³¨ï¼š**int å’Œ double éƒ½æ˜¯ num çš„å­ç±»å‹ã€‚num ç±»å‹åŒ…æ‹¬åŸºæœ¬çš„æ“ä½œç¬¦ï¼Œå¦‚`+ã€-ã€/å’Œ*`ï¼Œè¿˜å¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°`abs()ã€ceil()å’Œfloor()`ç­‰æ–¹æ³•ã€‚(ä½è¿ç®—ç¬¦ï¼Œå¦‚`>>`ï¼Œåœ¨intç±»ä¸­å®šä¹‰)å¦‚æœ num åŠå…¶å­ç±»å‹æ²¡æœ‰è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œé‚£ä¹ˆ`dart:math library`å¯èƒ½ä¼šæœ‰ã€‚

**ä»¥ä¸‹æ˜¯å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—çš„æ–¹æ³•ï¼Œåä¹‹äº¦ç„¶ï¼š**

```dart
// String -> int
var one = int.parse('1');
assert(one == 1);

// String -> double
var onePointOne = double.parse('1.1');
assert(onePointOne == 1.1);

// int -> String
String oneAsString = 1.toString();
assert(oneAsString == '1');

// double -> String
String piAsString = 3.14159.toStringAsFixed(2);
assert(piAsString == '3.14');
```



#### 2.2.2 String

dart å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç å•å…ƒçš„åºåˆ—ã€‚å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";
```

å¯ä»¥ä½¿ç”¨`${expression}`å°†**è¡¨è¾¾å¼çš„å€¼**æ”¾å…¥å­—ç¬¦ä¸²ä¸­ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯**ä¸€ä¸ªæ ‡è¯†ç¬¦**ï¼Œå¯ä»¥è·³è¿‡`{}`ã€‚ä¸ºäº†è·å¾—ä¸å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œdart ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡çš„toString()æ–¹æ³•ã€‚

```dart
var s = 'string interpolation';

assert('Dart has $s, which is very handy.' ==
       'Dart has string interpolation, ' +
       'which is very handy.');
assert('That deserves all caps. ' +
       '${s.toUpperCase()} is very handy!' ==
       'That deserves all caps. ' +
       'STRING INTERPOLATION is very handy!');       
```

**æ³¨æ„ï¼š**==æ£€éªŒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«ç›¸åŒåºåˆ—çš„ä»£ç å•å…ƒï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯ç­‰ä»·çš„ï¼Œè¿™ç‚¹ä¸ JavaScript ç±»ä¼¼ã€‚

å¯ä»¥ä½¿ç”¨**ç›¸é‚»çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆä¹Ÿå¯ä»¥çœ‹åšæ˜¯ç”¨ç©ºæ ¼ï¼‰**æˆ– **+** è¿ç®—ç¬¦è¿æ¥å­—ç¬¦ä¸²ï¼š

```dart
var s1 = 'String ' 'concatenation' " works even over line breaks.";
assert(s1 == 'String concatenation works even over ' 'line breaks.');
var s2 = 'The + operator ' + 'works, as well.';
assert(s2 == 'The + operator works, as well.');
```

**å¯¹äºåˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š**

- ä½¿ç”¨`\n`ç”¨åšæ¢è¡Œã€‚

- ä½¿ç”¨å¸¦æœ‰å•å¼•å·æˆ–åŒå¼•å·çš„ä¸‰é‡å¼•å·ã€‚

```dart
var s = 'a \n multi-line string'

var s1 = '''
You can create
multi-line strings like this one.
''';

var s2 = """This is also a
multi-line string.""";
```

å¦‚æœä¸æƒ³è¦è½¬ä¹‰å­—ç¬¦ä½ å¯ä»¥ç”¨`r`å‰ç¼€åˆ›å»ºä¸€ä¸ª**åŸå§‹å­—ç¬¦ä¸²**ï¼š

```dart
var s = r'In a raw string, not even \n gets special treatment.';
// In a raw string, not even \n gets special treatment.
```

**è¦æ³¨æ„ä¸€ç‚¹ï¼Œå­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œåªè¦ä»»ä½•å†…æ’è¡¨è¾¾å¼éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œè®¡ç®—ç»“æœä¸º null æˆ–æ•°å€¼ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼ã€‚**

```dart
// These work in a const string.
const aConstNum = 0;
const aConstBool = true;
const aConstString = 'a constant string';

// These do NOT work in a const string.
var aNum = 0;
var aBool = true;
var aString = 'a string';
const aConstList = [1, 2, 3];

const validConstString = '$aConstNum $aConstBool $aConstString';
// const invalidConstString = '$aNum $aBool $aString $aConstList'; // Error
/*
å‰ä¸‰ä¸ªé”™è¯¯å› ä¸ºä½¿ç”¨varè¿›è¡Œç”³æ˜çš„ï¼Œvarå£°æ˜çš„å˜é‡ä¹‹åå¯ä»¥æ”¹å˜å€¼ï¼Œä¸ç¬¦åˆå¸¸é‡å®šä¹‰ï¼Œè€Œåä¸€ä¸ªæ˜¯å› ä¸ºä¸ç¬¦åˆå¸¸é‡æ‰€éœ€ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸ç¬¦åˆnullæˆ–æ•°å€¼ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”å€¼ã€‚å³ä½¿ä½¿ç”¨toString()æ–¹æ³•ä¹Ÿä¼šæŠ¥é”™ï¼Œè¿™ä¸ç¬¦åˆç¼–è¯‘æ—¶å¸¸é‡çš„å®šä¹‰ï¼Œé™¤éç”¨final
*/
```



#### 2.2.3 Boolean

**ä¸ºäº†è¡¨ç¤ºå¸ƒå°”å€¼ï¼Œdart æœ‰ä¸€ä¸ªåä¸º bool çš„ç±»å‹ã€‚åªæœ‰ä¸¤ä¸ªå¯¹è±¡å…·æœ‰ bool ç±»å‹ï¼šå¸ƒå°”å­—é¢é‡ true å’Œ falseï¼Œå®ƒä»¬éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚**

dart çš„ç±»å‹å®‰å…¨æ€§æ„å‘³ç€ä¸èƒ½ä½¿ç”¨`if(ébooleanvalue)`æˆ–`assert(ébooleanvalue)`ä¹‹ç±»çš„ä»£ç ã€‚ç›¸åï¼Œæ˜¾å¼åœ°æ£€æŸ¥å€¼ï¼Œå¦‚ï¼š

```dart
// Check for an empty string.
var fullName = '';
assert(fullName.isEmpty);

// Check for zero.
var hitPoints = 0;
assert(hitPoints <= 0);

// Check for null.
var unicorn;
assert(unicorn == null);

// Check for NaN.
var iMeantToDoThis = 0 / 0;
assert(iMeantToDoThis.isNaN);
```



#### 2.2.4 List

**ä¹Ÿè®¸å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆå°±æ˜¯æ•°ç»„æˆ–æœ‰åºå¯¹è±¡ç»„ã€‚åœ¨ dart ä¸­ï¼Œæ•°ç»„æ˜¯åˆ—è¡¨å¯¹è±¡ï¼Œæ‰€ä»¥å¤§å¤šæ•°äººæŠŠå®ƒä»¬å«åšåˆ—è¡¨ã€‚**

dart åˆ—è¡¨å­—é¢é‡çœ‹èµ·æ¥åƒ JavaScript æ•°ç»„å­—é¢é‡ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ dart åˆ—è¡¨ï¼š

```dart
var list = [1, 2, 3];
```

**æ³¨æ„ï¼š**ä¸Šé¢çš„ä»£ç åˆ†æå™¨æ¨æ–­è¯¥åˆ—è¡¨å…·æœ‰`List<int>`ç±»å‹ã€‚å¦‚æœè¯•å›¾å‘æ­¤åˆ—è¡¨æ·»åŠ éæ•´å‹å¯¹è±¡ï¼Œåˆ™åˆ†æå™¨æˆ–è¿è¡Œæ—¶å°†å¼•å‘é”™è¯¯ã€‚

**å¯ä»¥è·å–åˆ—è¡¨çš„é•¿åº¦ï¼Œå¹¶å¼•ç”¨åˆ—è¡¨å…ƒç´ ï¼Œå°±åƒåœ¨JavaScriptä¸­é‚£æ ·ï¼š**

```dart
var list = [1, 2, 3];
assert(list.length == 3);
assert(list[1] == 2);

list[1] = 1;
assert(list[1] == 1);
```

**è¦åˆ›å»ºä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡åˆ—è¡¨ï¼ˆä¸èƒ½å†ä¹‹åæ”¹å˜å€¼ï¼‰ï¼Œéœ€è¦åœ¨åˆ—è¡¨å­—é¢é‡ä¹‹å‰æ·»åŠ  constï¼ˆæˆ–è€…ç›´æ¥ä½¿ç”¨ const ç”³æ˜å˜é‡ï¼‰ï¼š**

```dart
var constantList = const [1, 2, 3];
// OR
const constantList = [1, 2, 3];
// constantList[1] = 1; // Uncommenting this causes an error.
// è¿™é‡Œä¸ä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥é”™ï¼Œä½†æ˜¯è¿è¡Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸
```

åˆ—è¡¨ç±»å‹æœ‰è®¸å¤šä¾¿äºæ“ä½œåˆ—è¡¨çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œä¸è¯´ï¼Œåœ¨ä¹‹åä¼šè¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚



#### 2.2.5 Map

é€šå¸¸ï¼Œmap æ˜¯ä¸€ä¸ªå…³è”é”®å’Œå€¼çš„å¯¹è±¡ã€‚**é”®å’Œå€¼éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡**ã€‚æ¯ä¸ªé”®åªå‡ºç°ä¸€æ¬¡ï¼Œä½†æ˜¯æ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å€¼ã€‚dart å¯¹ map çš„æ”¯æŒæ˜¯é€šè¿‡ map å­—é¢é‡å’Œ map ç±»å‹æ¥æä¾›çš„ã€‚(å¯ä»¥çœ‹åšæ˜¯æ··å…¥äº† JavaScript å¯¹è±¡å­—é¢é‡å†™æ³•å’Œ JAVA çš„ HashMap é”®å€¼çš„å¯¹è±¡)

```dart
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
};

var nobleGases = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
```

**æ³¨æ„ï¼š**

- åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè§£æå™¨æ¨æ–­ gifts çš„ç±»å‹ä¸º`Map<String, String>`ï¼ŒnobleGases çš„ç±»å‹ä¸º`Map<int, String>`ã€‚å¦‚æœæ‚¨è¯•å›¾å‘ map æ·»åŠ é”™è¯¯ç±»å‹çš„å€¼ï¼Œåˆ™åˆ†æå™¨æˆ–è¿è¡Œæ—¶å°†å¼•å‘é”™è¯¯ã€‚

- dart ä¸­çš„ map å’Œ JavaScript ä¸­çš„å¯¹è±¡æ˜¯æœ‰åŒºåˆ«çš„ï¼Œé”®ï¼ˆkeyï¼‰å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ˜¯ String ç±»å‹çš„è¯ä¸èƒ½çœç•¥å¼•å·ï¼Œå› ä¸ºåœ¨ dart ä¸­è¿™æ ·ä¼šå°†å…¶è§£æä¸ºä¸€ä¸ªå˜é‡ã€‚

  ```dart
  const a = '1';
  var map1 = {
      true: '123',
      a: '2', // ä¸åŠ å¼•å·çš„aä¼šè¢«è§£æä¸º'1'
      b: '2', // æŠ¥é”™ï¼Œæ²¡æœ‰bå˜é‡
      'a': '2'
  };
  ```
  
- åŒæ ·çš„ï¼Œåœ¨é€šè¿‡ map çš„é”®è·å–å€¼å¾—æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨ JavaScript ä¸­å¸¸è§çš„`ç‚¹ï¼ˆ.ï¼‰`æ“ä½œç¬¦ï¼Œåªèƒ½ä½¿ç”¨`[]`æ“ä½œç¬¦ï¼Œ**`ç‚¹ï¼ˆ.ï¼‰`æ“ä½œç¬¦åªèƒ½ç”¨åœ¨è·å– dart ä¸­é€šè¿‡ç±»ç”Ÿæˆçš„å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ä¸­ï¼ˆå› ä¸º map ç”Ÿæˆçš„è‡ªå˜é‡åªæ˜¯çœ‹èµ·æ¥å’Œ JavaScript ä¸­çš„ä¸€æ ·ï¼Œå®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤§å·®åˆ«çš„ï¼‰**ã€‚

**åŒæ ·å¯ä»¥ä½¿ç”¨Mapæ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡:**

```dart
var gifts = new Map();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

var nobleGases = new Map();
nobleGases[2] = 'helium';
nobleGases[10] = 'neon';
nobleGases[18] = 'argon';
```

**æ·»åŠ å€¼å’Œæ£€ç´¢å€¼éƒ½å¦‚åŒ JavaScript ä¸­é‚£æ ·è¿›è¡Œï¼Œä¸åŒçš„æ˜¯ï¼š**

- å¦‚æœè¦è·å–çš„é”®ä¸å† map ä¸­ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ª nullï¼š

    ```dart
    var gifts = {'first': 'partridge'};
    assert(gifts['fifth'] == null);
    ```

- å¯ä»¥ä½¿ç”¨`.length`è·å– map ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼š

    ```dart
    var gifts = {'first': 'partridge'};
    gifts['fourth'] = 'calling birds';
    assert(gifts.length == 2);
    ```

**è¦åˆ›å»ºä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡çš„ map éœ€è¦åœ¨ map çš„å­—é¢é‡å‰åŠ `const`å…³é”®å­—ï¼ˆæˆ–ç›´æ¥ä½¿ç”¨ const å£°æ˜çš„å˜é‡ï¼‰ï¼š**

```dart
var constantMap = const {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};
// OR
const constantMap = {
  2: 'helium',
  10: 'neon',
  18: 'argon',
};

// constantMap[2] = 'Helium'; // Uncommenting this causes an error.
// è¿™é‡Œä¸ä¼šåœ¨ç¼–è¯‘æ—¶æŠ¥é”™ï¼Œä½†æ˜¯è¿è¡Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸
```



#### 2.2.6 Runesï¼ˆå­—ç¬¦ï¼‰

**åœ¨ dart ä¸­ï¼Œå­—ç¬¦æ˜¯å­—ç¬¦ä¸²çš„UTF-32ç¼–ç ç‚¹ã€‚**

Unicode ä¸ºä¸–ç•Œä¸Šæ‰€æœ‰çš„ä¹¦å†™ç³»ç»Ÿä¸­ä½¿ç”¨çš„æ¯ä¸ªå­—æ¯ã€æ•°å­—å’Œç¬¦å·å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚å› ä¸º dart å­—ç¬¦ä¸²æ˜¯ UTF-16 ä»£ç å•å…ƒçš„åºåˆ—ï¼Œæ‰€ä»¥åœ¨å­—ç¬¦ä¸²ä¸­è¡¨ç¤º32ä½çš„ Unicode å€¼éœ€è¦ç‰¹æ®Šçš„è¯­æ³•ã€‚

è¡¨ç¤º Unicode ç ç‚¹çš„å¸¸ç”¨æ–¹æ³•æ˜¯`\uXXXX`ï¼Œå…¶ä¸­ XXXX æ˜¯4ä½æ•°çš„åå…­è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚,å¿ƒå‹å­—ç¬¦(â™¥)çš„ç¼–ç ä¸º`\u2665`ã€‚è¦æŒ‡å®šå¤§äºæˆ–å°äº4ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œè¯·å°†å€¼æ”¾åœ¨èŠ±æ‹¬å·ä¸­ã€‚ä¾‹å¦‚ç¬‘è„¸è¡¨æƒ…(ğŸ˜†)çš„ç¼–ç `\u{1f600}`ã€‚

**String ç±»æœ‰å‡ ä¸ªå±æ€§å¯ä»¥ç”¨æ¥è·å– runesä¿¡æ¯ã€‚codeUnitAt å’Œ codeUnit å±æ€§è¿”å›16ä½ä»£ç å•å…ƒã€‚ä½¿ç”¨å­—ç¬¦å±æ€§è·å–å­—ç¬¦ä¸²çš„å­—ç¬¦ã€‚**

**ä¸‹é¢çš„ç¤ºä¾‹è¯´æ˜äº†å­—ç¬¦ã€16ä½ä»£ç å•å…ƒå’Œ32ä½ä»£ç ç‚¹ä¹‹é—´çš„å…³ç³»ï¼š**

```dart
main() {
  var clapping = '\u{1f600}';
  print(clapping);
  print(clapping.codeUnits);
  print(clapping.runes.toList());

  Runes input = new Runes(
      '\u2665  \u{1f605}  \u{1f60e}  \u{1f47b}  \u{1f596}  \u{1f44d}');
  print(new String.fromCharCodes(input));
}

//è¿è¡Œæ•ˆæœå¦‚ä¸‹
ğŸ˜€
[55357, 56832]
[128512]
â™¥  ğŸ˜…  ğŸ˜  ğŸ‘»  ğŸ––  ğŸ‘

Process finished with exit code 0
```

**æ³¨æ„ï¼š**ä½¿ç”¨åˆ—è¡¨æ“ä½œæ“ä½œ runes æ—¶è¦å°å¿ƒã€‚æ ¹æ®ç‰¹å®šçš„è¯­è¨€ã€å­—ç¬¦é›†å’Œæ“ä½œï¼Œè¿™ç§æ–¹æ³•å¾ˆå®¹æ˜“å‡ºé”™ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§[å¦‚ä½•åœ¨Dartä¸­åè½¬å­—ç¬¦ä¸²?](https://stackoverflow.com/questions/21521729/how-do-i-reverse-a-string-in-dart)



#### 2.2.7 Symbolsï¼ˆç¬¦å·ï¼‰

ç¬¦å·å¯¹è±¡è¡¨ç¤ºåœ¨ dart ç¨‹åºä¸­å£°æ˜çš„æ“ä½œç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚ä¸€èˆ¬æ¥è¯´å¯èƒ½æ°¸è¿œä¸éœ€è¦ä½¿ç”¨ç¬¦å·ï¼Œä½†æ˜¯å¯¹äºæŒ‰åç§°å¼•ç”¨æ ‡è¯†ç¬¦çš„api æ¥è¯´ï¼Œå®ƒä»¬æ˜¯éå¸¸é‡è¦çš„ï¼Œå› ä¸ºç¼©å°æ”¹å˜äº†æ ‡è¯†ç¬¦åç§°è€Œä¸æ˜¯æ ‡è¯†ç¬¦ç¬¦å·ã€‚

è¦è·å–æ ‡è¯†ç¬¦çš„ç¬¦å·ï¼Œè¯·ä½¿ç”¨ç¬¦å·æ–‡å­—ï¼Œç¬¦å·æ–‡å­—ä»…ä¸º`#`ï¼Œåé¢è·Ÿç€æ ‡è¯†ç¬¦ï¼š

```dart
#radix
#bar
```

**æ³¨æ„ï¼š**ç¬¦å·å¸¸é‡æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚



## 3.è¿ç®—ç¬¦

dart å®šä¹‰äº†ä¸‹è¡¨ä¸­æ˜¾ç¤ºçš„æ“ä½œç¬¦ã€‚æ‚¨å¯ä»¥é‡å†™å…¶ä¸­çš„è®¸å¤šæ“ä½œç¬¦ï¼Œå¦‚å¯é‡å†™æ“ä½œç¬¦ä¸­æ‰€è¿°ï¼š

| æè¿°                 | æ“ä½œç¬¦                                                       |
| :------------------- | :----------------------------------------------------------- |
| ä¸€å…ƒåç½®æ“ä½œç¬¦       | expr++ â€‚â€‚ expr-- â€‚â€‚ () â€‚â€‚ [] â€‚â€‚ . â€‚â€‚ ?.                      |
| ä¸€å…ƒå‰ç½®æ“ä½œç¬¦       | -expr â€‚â€‚ !expr â€‚â€‚ ~expr â€‚â€‚ ++expr â€‚â€‚ --expr                  |
| ä¹˜é™¤è¿ç®—             | * â€‚â€‚ / â€‚â€‚ % â€‚â€‚ ~/                                            |
| åŠ å‡è¿ç®—             | + â€‚â€‚ -                                                       |
| ç§»ä½è¿ç®—             | << â€‚â€‚ >>                                                     |
| æŒ‰ä½ä¸               | &                                                            |
| æŒ‰ä½å¼‚æˆ–             | ^                                                            |
| æŒ‰ä½æˆ–               | \|                                                           |
| å…³ç³»å’Œç±»å‹æµ‹è¯•       | >= â€‚â€‚ > â€‚â€‚ <= â€‚â€‚ < â€‚â€‚ as â€‚â€‚ is â€‚â€‚ is!                        |
| ç›¸ç­‰                 | == â€‚â€‚ ï¼=                                                    |
| é€»è¾‘ä¸               | &&                                                           |
| é€»è¾‘æˆ–               | \|\|                                                         |
| æ˜¯å¦ä¸ºnull           | ??                                                           |
| å¤©å¥åˆ¤æ–­ï¼ˆä¸‰å…ƒè¿ç®—ï¼‰ | expr1 ? expr2 : expr3                                        |
| çº§è”                 | ..                                                           |
| èµ‹å€¼                 | = â€‚â€‚ *= â€‚â€‚ /= â€‚â€‚ ~/= â€‚â€‚ %= â€‚â€‚ += â€‚â€‚ -= â€‚â€‚ <<= â€‚â€‚ >>= â€‚â€‚ &= â€‚â€‚ ^= |

### 3.1 ç®—æœ¯è¿ç®—ç¬¦

dart ä¸­çš„ç®—æœ¯è¿ç®—ç¬¦ä¸å…¶ä»–è¯­è¨€å¤§ä½“æ˜¯ç±»ä¼¼çš„ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹ä¸ä¸€è‡´çš„æ˜¯ï¼Œdart ä¸­çš„é™¤æ³•æ˜¯ç¬¦åˆæˆ‘ä»¬ç”Ÿæ´»ä¸­çš„æ­£å¸¸è¿ç®—çš„ï¼Œå³ä½¿æ˜¯`int`ç±»å‹çš„å€¼ä¹Ÿä¼šæœ‰å°æ•°çš„ç»“æœå‡ºç°ï¼š

```dart
print(3 / 2); // 1.5 not 1
```

å¦‚æœæƒ³è¦åƒå…¶ä»–è¯­è¨€ä¸€ç›´å–æ•´ï¼Œéœ€è¦ä½¿ç”¨`~/`è¿ç®—ç¬¦ï¼š

```dart
print(3 ~/ 2);// 1
```



### 3.2 ç›¸ç­‰å’Œå…³ç³»è¿ç®—ç¬¦

**åŒå…¶å®ƒç±»å‹è¯­è¨€ï¼Œç•¥ã€‚**



### 3.3 ç±»å‹æµ‹è¯•æ“ä½œç¬¦

**`as`ï¼Œ`is`å’Œ`is!`æ“ä½œç¬¦å¯ä»¥æ–¹ä¾¿åœ°åœ¨è¿è¡Œæ—¶æ£€æŸ¥ç±»å‹ã€‚**

| æ“ä½œç¬¦ | è¯´æ˜                              |
| :----- | :-------------------------------- |
| as     | å½¢æ€è½¬æ¢                          |
| is     | å¦‚æœå¯¹è±¡å…·æœ‰æŒ‡å®šçš„ç±»å‹ï¼Œåˆ™ä¸ºTrue  |
| is!    | å¦‚æœå¯¹è±¡å…·æœ‰æŒ‡å®šçš„ç±»å‹ï¼Œåˆ™ä¸ºFalse |

- å¯¹äº is æ“ä½œç¬¦ï¼Œå¦‚æœ obj å®ç°äº† T æŒ‡å®šçš„æ¥å£ï¼Œåˆ™`obj is T`ä¸º0çœŸã€‚ä¾‹å¦‚ï¼Œ`obj is Object`æ€»æ˜¯ä¸ºçœŸã€‚

- ä½¿ç”¨ as æ“ä½œç¬¦å°†å¯¹è±¡è½¬æ¢ä¸ºç‰¹å®šç±»å‹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥å°†å…¶ä½œä¸º is æµ‹è¯•çš„ç®€å†™å½¢å¼ï¼Œä»¥ä½¿ç”¨è¯¥å¯¹è±¡çš„è¡¨è¾¾å¼å¯¹å¯¹è±¡è¿›è¡Œæµ‹è¯•ï¼š

    ```dart
    if (emp is Person) {
        // Type check
        emp.firstName = 'Bob';
    }
    ```
    
    ä½¿ç”¨asæ“ä½œç¬¦å¯ä»¥ä½¿ä»£ç æ›´ç®€çŸ­:

    ```dart
    (emp as Person).firstName = 'Bob';
    ```

**æ³¨æ„ï¼š**ä¸Šé¢ä¸¤ä¸ªä¾‹å­çš„ä»£ç ä¸ç­‰æ•ˆã€‚å¦‚æœ emp æ˜¯ null æˆ–ä¸æ˜¯ Personï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼ˆä½¿ç”¨ isï¼‰ä¹ˆéƒ½ä¸åšï¼›ç¬¬äºŒä¸ªï¼ˆå¸¦æœ‰ asï¼‰æŠ›å‡ºå¼‚å¸¸ã€‚



### 3.4 èµ‹å€¼æ“ä½œç¬¦

dart çš„èµ‹å€¼æ“ä½œç¬¦å’Œå¤åˆèµ‹å€¼æ“ä½œç¬¦ä¹Ÿå’Œå…¶ä»–è¯­è¨€çš„ç±»ä¼¼ï¼Œä¹Ÿæœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œè‹¥è¦ä»…ä»…ä¸ºç©ºçš„å˜é‡èµ‹å€¼å¯ä»¥ä½¿ç”¨`??=`æ“ä½œç¬¦ã€‚

```dart
// Assign value to a
a = value;
// Assign value to b if b is null; otherwise, b stays the same
///ä»…ä»…åœ¨bä¸ºç©ºçš„æƒ…å†µä¸‹bè¢«èµ‹å€¼valueå¦åˆ™bçš„å€¼ä¸å˜
b ??= value;
```



### 3.5 é€»è¾‘è¿ç®—ç¬¦

**æœ‰`!`ã€`&&`å’Œ`||`ï¼ŒåŒå…¶å®ƒç±»å‹è¯­è¨€ï¼Œç•¥ã€‚**



### 3.6 ä½å’Œç§»ä½è¿ç®—

**å¯ä»¥æ“çºµ dart ä¸­çš„å•ä¸ªæ•°å­—ä½ã€‚é€šå¸¸ï¼Œä¼šä½¿ç”¨è¿™äº›ä½å’Œç§»ä½è¿ç®—ç¬¦ã€‚**

| è¿ç®—ç¬¦ | è¯´æ˜     |
| :----- | :------- |
| &      | æŒ‰ä½ä¸   |
| \|     | æŒ‰ä½æˆ–   |
| ^      | æŒ‰ä½å¼‚æˆ– |
| ~expr  | æŒ‰ä½å–å |
| <<     | å·¦ç§»     |
| >>     | å³ç§»     |

ä¸‹ä¾‹æ˜¯ä½¿ç”¨ä½è¿ç®—ç¬¦å’Œå”¯ä¸€è¿ç®—ç¬¦çš„ç¤ºä¾‹ï¼š

```dart
final value = 0x22;
final bitmask = 0x0f;

assert((value & bitmask) == 0x02); // AND
assert((value & ~bitmask) == 0x20); // AND NOT
assert((value | bitmask) == 0x2f); // OR
assert((value ^ bitmask) == 0x2d); // XOR
assert((value << 4) == 0x220); // Shift left
assert((value >> 4) == 0x02); // Shift right
```



### 3.7 æ¡ä»¶è¡¨è¾¾å¼

dart ä¸­æœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼Œå¯ä»¥ç²¾ç¡®åœ°è®¡ç®—é‚£äº›å¯èƒ½éœ€è¦`if-else`è¯­å¥çš„è¡¨è¾¾å¼ï¼š

- **condition ? expr1 : expr2ï¼ˆä¸‰ç›®è¡¨è¾¾å¼ï¼‰ï¼š**å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œåˆ™è®¡ç®— expr1ï¼ˆå¹¶è¿”å›å…¶å€¼ï¼‰ï¼›å¦åˆ™ï¼Œè®¡ç®—å¹¶è¿”å› expr2 çš„å€¼ã€‚

- **expr1 ?? expr2ï¼š**å¦‚æœ expr1 æ˜¯éç©ºçš„ï¼Œåˆ™è¿”å›å…¶å€¼ï¼›å¦åˆ™ï¼Œè®¡ç®—å¹¶è¿”å› expr2 çš„å€¼ã€‚

å½“éœ€è¦åŸºäºå¸ƒå°”è¡¨è¾¾å¼çš„ç»“æœé€‰æ‹©èµ‹å€¼ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ ***?:*** ã€‚

```dart
var visibility = isPublic ? 'public' : 'private';
```

å¦‚æœå¸ƒå°”è¡¨è¾¾å¼åªæƒ³åˆ¤æ–­å€¼æ˜¯å¦ä¸º nullï¼Œè¯·è€ƒè™‘ä½¿ç”¨ ***??*** ã€‚

```dart
String playerName(String name) => name ?? 'Guest';
```



### 3.8 çº§è”è¡¨ç¤ºæ³• ï¼ˆ..ï¼‰

**çº§è”ï¼ˆ..ï¼‰å…è®¸åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªæ“ä½œåºåˆ—ã€‚é™¤äº†å‡½æ•°è°ƒç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¿é—®åŒä¸€å¯¹è±¡ä¸Šçš„å­—æ®µã€‚è¿™é€šå¸¸å¯ä»¥çœå»åˆ›å»ºä¸´æ—¶å˜é‡çš„æ­¥éª¤ï¼Œèƒ½æ›´ä¸ºæµç•…çš„å†™ä»£ç ã€‚**

**çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š**

```dart
querySelector('#confirm') // Get an object.
  ..text = 'Confirm' // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) => window.alert('Confirmed!'));
```

é¦–å…ˆè°ƒç”¨`querySelector()`æ–¹æ³•è¿”å›ä¸€ä¸ª`selector`å¯¹è±¡ã€‚è·Ÿéšçº§è”è¡¨ç¤ºæ³•çš„ä»£ç **å¯¹è¿™ä¸ªé€‰æ‹©å™¨å¯¹è±¡è¿›è¡Œæ“ä½œï¼Œå¿½ç•¥å¯èƒ½è¿”å›çš„ä»»ä½•åç»­å€¼ã€‚**

**æ³¨æ„ï¼š**åœ¨çº§è”çš„æ—¶å€™ï¼Œè·å–çš„å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå±æ€§æˆ–æ–¹æ³•å¼€å§‹å°±éœ€è¦ä½¿ç”¨`..`ï¼Œå…¨ç¨‹éƒ½ä¸èƒ½ä½¿ç”¨å•ç‹¬çš„`.`ã€‚

ç­‰ä»·äºï¼š

```dart
var button = querySelector('#confirm');
button.text = 'Confirm';
button.classes.add('important');
button.onClick.listen((e) => window.alert('Confirmed!'));
```

**ä¹Ÿå¯ä»¥åµŒå¥—çº§è”æ“ä½œã€‚ä¾‹å¦‚ï¼š**

```dart
final addressBook = (AddressBookBuilder()
      ..name = 'jenny'
      ..email = 'jenny@example.com'
      ..phone = (PhoneNumberBuilder()
            ..number = '415-555-0100'
            ..label = 'home')
          .build())
    .build();
```

ä¸è¿‡ï¼Œåœ¨è¿”å›å®é™…å¯¹è±¡çš„å‡½æ•°ä¸Šæ„é€ çº§è”è¦å°å¿ƒï¼Œå¯èƒ½æˆ‘ä»¬éœ€è¦çº§è”çš„è¡¨è¾¾å¼æ ¹æœ¬å°±æ²¡æœ‰è¿”å›ç»™æˆ‘ä»¬æ­£ç¡®çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¼šå‡ºé”™ï¼š

```dart
var sb = StringBuffer();
sb.write('foo')
  ..write('bar'); // Error: method 'write' isn't defined for 'void'.
// sb.write()è¿”å›ç»“æœä¸ºvoidï¼Œæ‰€ä»¥ä¸èƒ½å†ä¸€ä¸ªvoidç»“æœä¸Šç»§ç»­æ„å»ºçº§è”æ“ä½œã€‚
```

**æ³¨æ„ï¼š**ä¸¥æ ¼åœ°è¯´ï¼Œçº§è”ï¼ˆ..ï¼‰è¡¨ç¤ºæ³•ä¸æ˜¯è¿ç®—ç¬¦ã€‚è¿™åªæ˜¯ dart è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚



### 3.9 å…¶å®ƒè¿ç®—ç¬¦ï¼ˆä¸»è¦æ˜¯ ?.ï¼‰

| è¿ç®—ç¬¦ | åç§°             | è¯´æ˜                                                         |
| :----- | :--------------- | :----------------------------------------------------------- |
| ()     | åŠŸèƒ½å‡½æ•°         | è¡¨ç¤ºä¸€ä¸ªå‡½æ•°è°ƒç”¨                                             |
| []     | è®¿é—®åˆ—è¡¨         | å¼•ç”¨åˆ—è¡¨ä¸­æŒ‡å®šç´¢å¼•å¤„çš„å€¼                                     |
| .      | è®¿é—®æˆå‘˜         | è¡¨ç¤ºè¡¨è¾¾å¼çš„å±æ€§;ä¾‹å¦‚:foo.barä»è¡¨è¾¾å¼fooä¸­é€‰æ‹©å±æ€§bar        |
| ?.     | æ ¹æ®æ¡ä»¶è®¿é—®æˆå‘˜ | å’Œ(.)ç›¸ä¼¼ï¼Œä½†æ˜¯å·¦è¾¹çš„æ“ä½œæ•°å¯ä»¥ä¸ºç©ºï¼›ä¾‹å¦‚ï¼š`foo?.bar`ä»fooçš„è¡¨è¾¾å¼ä¸­é€‰æ‹©barå±æ€§ï¼Œå¦‚æœfooä¸ºç©ºåˆ™è¿”å›null |

è¿™é‡Œè¯´æ˜ä¸€ä¸‹`.`å’Œ`?.`ï¼š

```dart	
class A {
    var b;
}

void main() {
    /// aobjä¸ºAçš„ä¸€ä¸ªå®ä¾‹
    var aobj = A();
    ///zä¸ºç©ºå€¼çš„å˜é‡
    var z=null;
    print(aobj.b);
    print(z?.b); // null
    // å¦‚æœæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™è¯´æ˜éƒ½ä¸ä¼šå‘ç”Ÿ
    
    print(z.b); // exception
}
```



## 4.å‡½æ•°

**dart æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å³ä½¿æ˜¯å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªç±»å‹ Functionã€‚è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œè¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å…¸å‹ç‰¹å¾ã€‚**

### 4.1 å‡½æ•°å£°æ˜

```dart
bool isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}
```

**å¯¹äºåªåŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•ï¼ˆç±»ä¼¼ JavaScript ä¸­çš„ç®­å¤´å‡½æ•°ï¼‰ï¼š**

```dart
bool isNoble (int atomicNumber)=> _nobleGases [ atomicNumber ] != null ;
```

**æ³¨æ„ï¼š**åœ¨`ç®­å¤´(=>)`å’Œ`åˆ†å·(;)`ä¹‹é—´åªèƒ½å‡ºç°ä¸€ä¸ªè¡¨è¾¾å¼(ä¸æ˜¯è¯­å¥)ã€‚ä¾‹å¦‚ï¼Œä¸èƒ½åœ¨é‚£é‡Œæ”¾ä¸€ä¸ª`if`è¯­å¥ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ã€‚



### 4.2 å‡½æ•°èµ‹å€¼

- å‡½æ•°ä½œä¸ºå˜é‡

  ```dart
  var say = (str){
    print(str);
  };
  say("hi world");
  ```

- å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’

  ```dart
  void execute(var callback) {
      callback();
  }
  execute(() => print("xxx"))
  ```




### 4.3 main å‡½æ•°

æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªé¡¶çº§çš„`main()`å‡½æ•°ï¼Œå®ƒä½œä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚`main()`å‡½æ•°è¿”å›`void`ï¼Œå¹¶æœ‰ä¸€ä¸ªå¯é€‰çš„åˆ—è¡¨å‚æ•°ä½œä¸ºå‚æ•°ã€‚

```dart
void main() {
  querySelector('#sample_text_id')
    ..text = 'Click me!'
    ..onClick.listen(reverseText);
}
```

**ä¸‹é¢æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œåº”ç”¨ç¨‹åºçš„main()å‡½æ•°ç¤ºä¾‹ï¼Œå®ƒæ¥å—å‚æ•°ï¼š**

```dart
// Run the app like this: dart args.dart 1 test
void main(List<String> arguments) {
  print(arguments);

  assert(arguments.length == 2);
  assert(int.parse(arguments[0]) == 1);
  assert(arguments[1] == 'test');
}
```

**æ³¨ï¼š**å¯ä»¥ä½¿ç”¨`args`åº“æ¥å®šä¹‰å’Œè§£æå‘½ä»¤è¡Œå‚æ•°ã€‚



### 4.4 å‡½æ•°å‚æ•°

> **ä¸èƒ½åŒæ—¶ä½¿ç”¨å¯é€‰çš„ä½ç½®å‚æ•°å’Œå¯é€‰çš„å‘½åå‚æ•°**

å¯é€‰çš„ä½ç½®å‚æ•°å’Œå¯é€‰çš„å‘½åå‚æ•°éƒ½èƒ½å’Œæ™®é€šçš„å‡½æ•°å‚æ•°ä¸€èµ·ä½¿ç”¨ã€‚

#### 4.4.1 å¯é€‰çš„ä½ç½®å‚æ•°

åŒ…è£…ä¸€ç»„å‡½æ•°å‚æ•°ï¼Œç”¨`[]`æ ‡è®°ä¸ºå¯é€‰çš„ä½ç½®å‚æ•°ï¼Œå¹¶æ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åé¢

```dart
String say(String from, String msg, [String device]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  return result;
}
```

ä¸‹é¢æ˜¯ä¸€ä¸ªä¸å¸¦å¯é€‰å‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š

```dart
say('Bob', 'Howdy'); //ç»“æœæ˜¯ï¼š Bob says Howdy
```

ä¸‹é¢æ˜¯ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š

```dart
say('Bob', 'Howdy', 'smoke signal'); //ç»“æœæ˜¯ï¼šBob says Howdy with a smoke signal
```



#### 4.4.2 å¯é€‰çš„å‘½åå‚æ•°

å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨`{param1, param2, â€¦}`ï¼Œæ”¾åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åé¢ï¼Œç”¨äºæŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š

```dart
//è®¾ç½®[bold]å’Œ[hidden]æ ‡å¿—
void enableFlags({bool bold, bool hidden}) {
    // ... 
}
```

è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`paramName: value`æ¥æŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚:

```dart
enableFlags(bold: true, hidden: false);
```

å¯é€‰å‘½åå‚æ•°åœ¨ flutter ä¸­ä½¿ç”¨éå¸¸å¤šï¼Œå¯ä»¥åœ¨ä»»ä½• dart ä»£ç ï¼ˆä¸ä»…ä»…æ˜¯ flutterï¼‰ä¸­æ³¨é‡Šä¸€ä¸ªå·²å‘½åçš„å‚æ•°ï¼Œå¹¶ä½¿ç”¨`@required`è¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå¿…ä¼ çš„å‚æ•°ã€‚ä¾‹å¦‚:

```dart
const Scrollbar({Key key, @required Widget child})
```

å½“æ„é€ Scrollbaræ—¶ï¼Œåˆ†æå™¨åœ¨æ²¡æœ‰å­å‚æ•°ï¼ˆchildï¼‰æ—¶æŠ¥é”™ã€‚

**æ³¨ï¼š**`Required`åœ¨å…ƒåŒ…ä¸­è¢«å®šä¹‰ã€‚æˆ–è€…ç›´æ¥ä½¿ç”¨`import package:meta/meta.dart`å¯¼å…¥æˆ–è€…å¯¼å…¥å…¶ä»–åŒ…å« meta å¯¼å‡ºçš„åŒ…ï¼Œä¾‹å¦‚ flutter çš„åŒ…:`Flutter /material.dart`ã€‚



#### 4.4.3 é»˜ç„¶å‚æ•°å€¼

å¯ä»¥ä½¿ç”¨ = æ¥å®šä¹‰å‘½åå’Œä½ç½®å‚æ•°çš„é»˜è®¤å€¼ã€‚**é»˜è®¤å€¼å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡**ã€‚å¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤å€¼ä¸º nullã€‚

**æ³¨æ„ï¼š**å‡½æ•°çš„é»˜è®¤å‚æ•°å€¼åªèƒ½å†™åœ¨å¯é€‰çš„ä½ç½®å‚æ•°ï¼ˆ`{}`ï¼‰å’Œå¯é€‰çš„å‘½åå‚æ•°(`[]`)å†…ã€‚

ä¸‹é¢æ˜¯ä¸ºå‘½åå‚æ•°è®¾ç½®é»˜è®¤å€¼çš„ç¤ºä¾‹ï¼š

```dart
/// Sets the [bold] and [hidden] flags ...
void enableFlags({bool bold = false, bool hidden = false}) {...}

// bold will be true; hidden will be false.
enableFlags(bold: true);
```

ä¸‹ä¸€ä¸ªç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•è®¾ç½®ä½ç½®å‚æ•°çš„é»˜è®¤å€¼ï¼š

```dart
String say(String from, String msg,
    [String device = 'carrier pigeon', String mood]) {
  var result = '$from says $msg';
  if (device != null) {
    result = '$result with a $device';
  }
  if (mood != null) {
    result = '$result (in a $mood mood)';
  }
  return result;
}

assert(say('Bob', 'Howdy') ==
    'Bob says Howdy with a carrier pigeon');
    
```

è¿˜å¯ä»¥å°† list æˆ– map é›†åˆä½œä¸ºé»˜è®¤å€¼ã€‚ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰ä¸€ä¸ªå‡½æ•°`doStuff()`ï¼Œè¯¥å‡½æ•°æŒ‡å®šåˆ—è¡¨å‚æ•°çš„é»˜è®¤åˆ—è¡¨å’Œç¤¼å“å‚æ•°çš„é»˜è®¤mapé›†åˆï¼š

```dart
void doStuff(
    {List<int> list = const [1, 2, 3],
    Map<String, String> gifts = const {
      'first': 'paper',
      'second': 'cotton',
      'third': 'leather'
    }}) {
  print('list:  $list');
  print('gifts: $gifts');
}
```

## 

### 4.5 åŒ¿åå‡½æ•°

**å¤§å¤šæ•°å‡½æ•°éƒ½è¢«å‘½åï¼Œå¦‚`main()`æˆ–`printElement()`ã€‚ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å‡½æ•°åç§°çš„å‡½æ•°ï¼Œè¿™ç§å‡½æ•°ç§°ä¸ºåŒ¿åå‡½æ•°ï¼Œæˆ–è€… lambda å‡½æ•°æˆ–è€…é—­åŒ…å‡½æ•°ã€‚** 

ä¸è¿‡å¯ä»¥ä¸ºå˜é‡åˆ†é…ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä»é›†åˆä¸­æ·»åŠ æˆ–åˆ é™¤å®ƒã€‚

åŒ¿åå‡½æ•°çœ‹èµ·æ¥ç±»ä¼¼äºå‘½åå‡½æ•°ï¼šæœ‰0ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œåœ¨æ‹¬å·ä¹‹é—´ç”¨é€—å·å’Œå¯é€‰ç±»å‹æ ‡æ³¨åˆ†éš”ï¼Œåé¢çš„ä»£ç å—åŒ…å«å‡½æ•°çš„ä¸»ä½“ã€‚

```dart
([[Type] param1[, â€¦]]) { 
  codeBlock; 
}; 
```

ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰æ— ç±»å‹å‚æ•° item çš„åŒ¿åå‡½æ•°ã€‚è¯¥å‡½æ•°ä¸ºåˆ—è¡¨ä¸­çš„æ¯ä¸ª item è°ƒç”¨ï¼Œæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šç´¢å¼•çš„å€¼ï¼š

```dart
var list = ['apples', 'bananas', 'oranges'];
list.forEach((item) {
  print('${list.indexOf(item)}: $item');
});
```

å¦‚æœå‡½æ•°åªåŒ…å«ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼š

```dart
var list = ['apples', 'bananas', 'oranges'];
list.forEach((item) => print('${list.indexOf(item)}: $item'));
```



### 4.6 å‡½æ•°é—­åŒ…

dart ä¸­çš„å‡½æ•°é—­åŒ…å’Œå‡½æ•°ä½œç”¨åŸŸçš„é—®é¢˜å’Œ JavaScript ä¸­çš„ä¸€è‡´ï¼Œç•¥ã€‚



### 4.7 è¿”å›å€¼

æ‰€æœ‰å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå€¼ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™è¯­å¥è¿”å› nullã€‚

```dart
foo() {}
assert(foo() == null);
```

dart ä¸­çš„å‡½æ•°å£°æ˜**å¦‚æœæ˜¯å†™åœ¨å…¨å±€æ²¡æœ‰æ˜¾å¼å£°æ˜**è¿”å›å€¼ç±»å‹æ—¶ä¼šé»˜è®¤å½“åš`dynamic`å¤„ç†ã€‚

**æ³¨æ„ï¼š**

- å†™åœ¨å…¨å±€çš„å‡½æ•°è¿”å›å€¼æ²¡æœ‰ç±»å‹æ¨æ–­ã€‚
- å†™åœ¨å‡½æ•°å†…éƒ¨ï¼ˆåŒ…æ‹¬ main å‡½æ•°ï¼‰çš„å‡½æ•°æœ‰ç±»å‹æ¨æ–­ï¼Œä¸å†™`return`è¿”å›å€¼æ˜¯ Null ç±»å‹ï¼Œå¦‚æœè¿”å›æ¡ä»¶æœ‰å¾ˆå¤šç§ä¼šè¿”å› Object ç±»å‹ã€‚

```dart
typedef bool CALLBACK();

// ä¸æŒ‡å®šè¿”å›ç±»å‹ï¼Œæ­¤æ—¶é»˜è®¤ä¸ºdynamicï¼Œä¸æ˜¯bool
isNoble(int atomicNumber) {
  return _nobleGases[atomicNumber] != null;
}

void test(CALLBACK cb) {
  print(cb());
}

main() {
  /*
  // è¿”å›ç±»å‹èƒ½æ¨æ–­å‡ºæ˜¯bollï¼Œå†™åœ¨é‡Œé¢ä¸‹é¢çš„ä»£ç ä¸ä¼šæŠ¥é”™
    isNoble(int atomicNumber) {
      return _nobleGases[atomicNumber] != null;
    }
  */
  // æŠ¥é”™ï¼ŒisNobleä¸æ˜¯boolç±»å‹
  test(isNoble);
}
```



## 5.ç±»

dart æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå…·æœ‰ç±»å’ŒåŸºäº mixin çš„ç»§æ‰¿ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰çš„ç±»éƒ½æ˜¯ Object çš„å­ç±»ã€‚åŸºäº mixin çš„ç»§æ‰¿æ„å‘³ç€ï¼Œå°½ç®¡æ¯ä¸ªç±»ï¼ˆé™¤äº† Objectï¼‰éƒ½åªæœ‰ä¸€ä¸ªè¶…ç±»ï¼Œä½†ç±»ä¸»ä½“å¯ä»¥åœ¨å¤šä¸ªç±»å±‚æ¬¡ç»“æ„ä¸­é‡ç”¨ã€‚

### 5.1 ç±»çš„åŸºæœ¬ä½¿ç”¨

#### 5.1.1 ä½¿ç”¨ç±»æˆå‘˜

dart ä¸­çš„ç±»çš„æˆå‘˜ä½¿ç”¨ä¸ JavaScript ä¸­çš„ç±»ä¼¼ï¼Œåœ¨ä½¿ç”¨æ—¶åªæœ‰äº›è®¸çš„ä¸åŒã€‚

**ä½¿ç”¨ç‚¹å·ï¼ˆ.ï¼‰å¼•ç”¨å®ä¾‹å˜é‡æˆ–æ–¹æ³•ï¼š**

```dart
var p = Point(2, 2);

// Set the value of the instance variable y.
p.y = 3;

// Get the value of y.
assert(p.y == 3);

// Invoke distanceTo() on p.
num distance = p.distanceTo(Point(4, 4));
```

**ä¸ºé¿å…æœ€å·¦æ“ä½œæ•°ä¸ºç©ºæ—¶å‡ºç°å¼‚å¸¸ï¼Œä½¿ç”¨ `?.`ä»£æ›¿`.`æ¥ä½¿ç”¨ï¼š**

```dart
// If p is non-null, set its y value to 4.
p?.y = 4;
```



#### 5.1.2 ä½¿ç”¨æ„é€ å‡½æ•°

å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚æ„é€ å‡½æ•°åå¯ä»¥æ˜¯ ClassName æˆ– ClassName.identifierï¼ˆå¯ä»¥çœ‹åšæ˜¯ç±»ä¼¼é‡è½½å‡½æ•°çš„æ„é€ å‡½æ•°ï¼‰ã€‚

**æ³¨ï¼š**åœ¨ dart ä¸­ new å…³é”®å­—ä¸ºå¯é€‰å…³é”®å­—ã€‚

```dart
var p1 = Point(2, 2);
var p2 = Point.fromJson({'x': 1, 'y': 2});
```

ä¸‹é¢çš„ä»£ç å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼Œä½†æ˜¯åœ¨æ„é€ å‡½æ•°åä¹‹å‰ä½¿ç”¨å¯é€‰çš„ new å…³é”®å­—ï¼š

```dart
var p1 = new Point(2, 2);
var p2 = new Point.fromJson({'x': 1, 'y': 2});
```

**æœ‰äº›ç±»æä¾›å¸¸é‡æ„é€ å‡½æ•°ã€‚è¦ä½¿ç”¨å¸¸é‡æ„é€ å‡½æ•°åˆ›å»ºç¼–è¯‘æ—¶å¸¸é‡ï¼Œè¯·å°† const å…³é”®å­—æ”¾åœ¨æ„é€ å‡½æ•°åä¹‹å‰ï¼š**

```dart
class Person{
    const Person();
}
var p = const Person();
```

æ„é€ ä¸¤ä¸ªç›¸åŒçš„ç¼–è¯‘æ—¶å¸¸é‡ä¼šç”Ÿæˆä¸€ä¸ªå•ä¸€çš„ã€è§„èŒƒçš„å®ä¾‹ï¼ˆå¯ä»¥çœ‹åšå°±æ˜¯å•ä¾‹æ¨¡å¼ï¼‰ï¼š

```dart
var a = const ImmutablePoint(1, 1);
var b = const ImmutablePoint(1, 1);

assert(identical(a, b)); // They are the same instance!
```

å½“ç„¶ï¼Œå’Œå‰é¢è®² const ä¸€æ ·ï¼Œåœ¨å¸¸é‡ä¸Šä¸‹æ–‡ä¸­ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°æˆ–æ–‡å­—ä¹‹å‰çœç•¥ constï¼š

```dart
// Lots of const keywords here.
const pointAndLine = const {
  'point': const [const ImmutablePoint(0, 0)],
  'line': const [const ImmutablePoint(1, 10), const ImmutablePoint(-2, 11)],
};
```

é™¤äº†ç¬¬ä¸€æ¬¡ä½¿ç”¨constå…³é”®å­—ä¹‹å¤–å…¶ä»–çš„constéƒ½å¯ä»¥çœç•¥ï¼ˆèƒ½è‡ªåŠ¨é€’å½’æ•ˆæœï¼‰ï¼š

```dart
// Only one const, which establishes the constant context.
const pointAndLine = {
  'point': [ImmutablePoint(0, 0)],
  'line': [ImmutablePoint(1, 10), ImmutablePoint(-2, 11)],
};
```



#### 5.1.3 è·å¾—å¯¹è±¡çš„ç±»å‹

è¦åœ¨è¿è¡Œæ—¶è·å¾—å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„`runtimeType`å±æ€§ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ªç±»å‹å¯¹è±¡ã€‚

```dart
print('The type of a is ${a.runtimeType}');
```



#### 5.1.4 å®ä¾‹å˜é‡

**æ‰€æœ‰æœªåˆå§‹åŒ–çš„å®ä¾‹å˜é‡éƒ½å…·æœ‰ null å€¼ã€‚**

ä¸‹é¢æ˜¯å¦‚ä½•å£°æ˜å®ä¾‹å˜é‡çš„æ–¹æ³•ï¼š

```dart
class Point {
  num x; // Declare instance variable x, initially null.
  num y; // Declare y, initially null.
  num z = 0; // Declare z, initially 0.
}
```

**æ‰€æœ‰å®ä¾‹å˜é‡éƒ½ç”Ÿæˆéšå¼getteræ–¹æ³•ã€‚éæœ€ç»ˆå®ä¾‹å˜é‡ä¹Ÿç”Ÿæˆéšå¼setteræ–¹æ³•ã€‚**

```dart
class Point {
  num x;
  num y;
}

void main() {
  var point = Point();
  point.x = 4; // Use the setter method for x.
  assert(point.x == 4); // Use the getter method for x.
  assert(point.y == null); // Values default to null.
}
```

å¦‚æœåœ¨å£°æ˜å®ä¾‹å˜é‡çš„åœ°æ–¹ï¼ˆè€Œä¸æ˜¯åœ¨æ„é€ å‡½æ•°æˆ–æ–¹æ³•ä¸­ï¼‰åˆå§‹åŒ–å®ä¾‹å˜é‡ï¼Œåˆ™åœ¨åˆ›å»ºå®ä¾‹æ—¶ï¼ˆåœ¨æ„é€ å‡½æ•°åŠå…¶åˆå§‹åŒ–åˆ—è¡¨æ‰§è¡Œä¹‹å‰ï¼‰è®¾ç½®è¯¥å€¼ã€‚



### 5.2 æ„é€ å‡½æ•°

  é€šè¿‡åˆ›å»ºä¸€ä¸ªä¸ç±»åŒåçš„å‡½æ•°æ¥å£°æ˜æ„é€ å‡½æ•°(å¦å¤–ï¼Œè¿˜å¯ä»¥åƒ[å‘½åæ„é€ å‡½æ•°]ä¸­æè¿°çš„ä¸€æ ·é€‰æ‹©ä¸€ä¸ªé™„åŠ æ ‡è¯†ç¬¦)ã€‚æ„é€ å‡½æ•°æœ€å¸¸è§çš„åº”ç”¨å½¢å¼æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ªç±»çš„æ–°å®ä¾‹ï¼š

```
class Point {
  num x, y;

  Point(num x, num y) {
    // There's a better way to do this, stay tuned.
    this.x = x;
    this.y = y;
  }
}
```

thiså…³é”®å­—æ˜¯æŒ‡å½“å‰å®ä¾‹ã€‚

> æ³¨æ„:åªæœ‰åœ¨åç§°å†²çªæ—¶æ‰ä½¿ç”¨å®ƒã€‚å¦åˆ™ï¼ŒDartçš„ä»£ç é£æ ¼éœ€è¦çœç•¥this

ä½¿ç”¨æ„é€ å‡½æ•°çš„å‚æ•°ä¸ºå®ä¾‹å¤åˆ¶çš„ä½¿ç”¨éå¸¸å¸¸è§ï¼ŒDartå…·æœ‰è¯­æ³•ä¸Šçš„ä¼˜åŠ¿ï¼Œä½¿è¿™ç§ä½¿ç”¨æ›´å®¹æ˜“å®ç°ï¼š

```
class Point {
  num x, y;

  // Syntactic sugar for setting x and y
  // before the constructor body runs.
  Point(this.x, this.y);
}
```

## é»˜è®¤æ„é€ å‡½æ•°

å¦‚æœä¸å£°æ˜æ„é€ å‡½æ•°ï¼Œåˆ™ä¸ºæ‚¨æä¾›é»˜è®¤æ„é€ å‡½æ•°ã€‚é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶åœ¨è¶…ç±»ä¸­è°ƒç”¨æ— å‚æ•°æ„é€ å‡½æ•°ã€‚

## æ„é€ å‡½æ•°ä¸æ˜¯ç»§æ‰¿

å­ç±»ä¸ä»çˆ¶ç±»ç»§æ‰¿æ„é€ å‡½æ•°ã€‚æ²¡æœ‰å£°æ˜æ„é€ å‡½æ•°çš„å­ç±»åªæœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆæ²¡æœ‰å‚æ•°ï¼Œæ²¡æœ‰åç§°ï¼‰è€Œä¸æ˜¯ä»çˆ¶ç±»ç»§æ‰¿çš„æ„é€ å‡½æ•°ã€‚

## å‘½åçš„æ„é€ å‡½æ•°

ä½¿ç”¨å‘½åæ„é€ å‡½æ•°å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œæˆ–è€…è®©ä¸€ä¸ªç±»çš„ä½œç”¨å¯¹äºå¼€å‘äººå‘˜æ¥è¯´æ›´æ¸…æ™°ï¼š

```
class Point {
  num x, y;

  Point(this.x, this.y);

  // Named constructor
  Point.origin() {
    x = 0;
    y = 0;
  }
}
```

ä¸€å®šè¦è®°ä½æ„é€ å‡½æ•°æ˜¯ä¸ä¼šä»çˆ¶ç±»ç»§æ‰¿çš„ï¼Œè¿™æ„å‘³ç€çˆ¶ç±»çš„å‘½åæ„é€ å‡½æ•°å­ç±»ä¹Ÿä¸ä¼šç»§æ‰¿ã€‚å¦‚æœä½ å¸Œæœ›ä½¿ç”¨åœ¨è¶…ç±»ä¸­å®šä¹‰çš„å‘½åæ„é€ å‡½æ•°æ¥åˆ›å»ºå­ç±»ï¼Œåˆ™å¿…é¡»åœ¨å­ç±»ä¸­å®ç°è¯¥æ„é€ å‡½æ•°ã€‚

## è°ƒç”¨éé»˜è®¤çš„è¶…ç±»æ„é€ å‡½æ•°

é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»ä¸­çš„æ„é€ å‡½æ•°è°ƒç”¨çˆ¶ç±»çš„æœªå‘½åçš„æ— å‚æ•°æ„é€ å‡½æ•°ã€‚çˆ¶ç±»çš„æ„é€ å‡½æ•°åœ¨æ„é€ å‡½æ•°ä½“çš„å¼€å§‹å¤„è¢«è°ƒç”¨ã€‚å¦‚æœç±»ä¸­æœ‰ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œåˆå§‹åŒ–åˆ—è¡¨å°†åœ¨è°ƒç”¨è¶…ç±»ä¹‹å‰æ‰§è¡Œã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹:

- åˆå§‹åŒ–åˆ—è¡¨
- è¶…ç±»ä¸­çš„æ— å‚æ•°æ„é€ å‡½æ•°
- mainç±»ä¸­çš„æ— å‚æ•°æ„é€ å‡½æ•°

å¦‚æœè¶…ç±»æ²¡æœ‰æœªå‘½åçš„æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨è°ƒç”¨è¶…ç±»ä¸­çš„ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚åœ¨å†’å·(:)ä¹‹åï¼Œåœ¨æ„é€ å‡½æ•°ä½“(å¦‚æœæœ‰çš„è¯)ä¹‹å‰æŒ‡å®šè¶…ç±»æ„é€ å‡½æ•°ã€‚

åœ¨ä¸‹ä¾‹ä¸­ï¼ŒEmployeeç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†ä»–çš„è¶…ç±»Personä¸­çš„å‘½åæ„é€ å‡½æ•°ã€‚

```
class Person {
  String firstName;

  Person.fromJson(Map data) {
    print('in Person');
  }
}

class Employee extends Person {
  // Person does not have a default constructor;
  // you must call super.fromJson(data).
  Employee.fromJson(Map data) : super.fromJson(data) {
    print('in Employee');
  }
}

main() {
  var emp = new Employee.fromJson({});

  // Prints:
  // in Person
  // in Employee
  if (emp is Person) {
    // Type check
    emp.firstName = 'Bob';
  }
  (emp as Person).firstName = 'Bob';
}

///ç»“æœè¾“å‡ºä¸º
in Person
in Employee
```

å› ä¸ºçˆ¶ç±»æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯åœ¨è°ƒç”¨æ„é€ å‡½æ•°ä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å‚æ•°å¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œæ¯”å¦‚å‡½æ•°è°ƒç”¨:

```
class Employee extends Person {
  Employee() : super.fromJson(getDefaultData());
  // Â·Â·Â·
}
```

> è­¦å‘Šï¼šåœ¨è¶…ç±»çš„æ„é€ å‡½æ•°çš„å‚æ•°ä¸­ä¸èƒ½ä½¿ç”¨thiså…³é”®å­—ã€‚ä¾‹å¦‚ï¼Œå‚æ•°å¯ä»¥è°ƒç”¨staticæ–¹æ³•ä½†æ˜¯ä¸èƒ½è°ƒç”¨å®ä¾‹æ–¹æ³•

## åˆå§‹åŒ–åˆ—è¡¨

é™¤äº†è°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸»ä½“è¿è¡Œä¹‹å‰åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚åˆå§‹å€¼è®¾å®šé¡¹ç”¨é€—å·åˆ†å¼€ã€‚

```
// Initializer list sets instance variables before
// the constructor body runs.
Point.fromJson(Map<String, num> json)
    : x = json['x'],
      y = json['y'] {
  print('In Point.fromJson(): ($x, $y)');
}
```

> è­¦å‘Š:åˆå§‹åŒ–å™¨çš„å³è¾¹éƒ¨åˆ†ä¸­æ— æ³•è®¿é—®thiså…³é”®å­—ã€‚

åœ¨å¼€å‘æœŸé—´ï¼Œå¯ä»¥é€šè¿‡åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨assertæ¥éªŒè¯è¾“å…¥ã€‚

```
Point.withAssert(this.x, this.y) : assert(x >= 0) {
  print('In Point.withAssert(): ($x, $y)');
}
```

åˆå§‹åŒ–åˆ—è¡¨åœ¨è®¾ç½®finalå­—æ®µæ—¶å¾ˆæ–¹ä¾¿ã€‚ä¸‹é¢çš„ç¤ºä¾‹åˆå§‹åŒ–åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„ä¸‰ä¸ªfinalå­—æ®µï¼š

```
import 'dart:math';

class Point {
  final num x;
  final num y;
  final num distanceFromOrigin;

  Point(x, y)
      : x = x,
        y = y,
        distanceFromOrigin = sqrt(x * x + y * y);
}

main() {
  var p = new Point(2, 3);
  print(p.distanceFromOrigin);
}

///è¿è¡Œç»“æœ
3.605551275463989
```

## é‡å®šå‘æ„é€ å‡½æ•°

æœ‰æ—¶ï¼Œæ„é€ å‡½æ•°çš„å”¯ä¸€ç›®çš„æ˜¯é‡å®šå‘åˆ°åŒä¸€ä¸ªç±»ä¸­çš„å¦ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚é‡å®šå‘æ„é€ å‡½æ•°çš„ä¸»ä½“ä¸ºç©ºï¼Œæ„é€ å‡½æ•°è°ƒç”¨å‡ºç°åœ¨å†’å·(:)ä¹‹åã€‚

```
class Point {
  num x, y;

  // The main constructor for this class.
  Point(this.x, this.y);

  // Delegates to the main constructor.
  Point.alongXAxis(num x) : this(x, 0);
}
```

## å¸¸é‡æ„é€ å‡½æ•°

å¦‚æœæ‚¨çš„ç±»ç”Ÿæˆçš„å¯¹è±¡ä¸ä¼šæ”¹å˜ï¼Œæ‚¨å¯ä»¥ä½¿è¿™äº›å¯¹è±¡æˆä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ä¸ºæ­¤ï¼Œå®šä¹‰ä¸€ä¸ªconstæ„é€ å‡½æ•°ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰å®ä¾‹å˜é‡éƒ½æ˜¯finalçš„ã€‚

```
class ImmutablePoint {
  static final ImmutablePoint origin =
      const ImmutablePoint(0, 0);

  final num x, y;

  const ImmutablePoint(this.x, this.y);
}
```

## å·¥å‚æ„é€ å‡½æ•°

åœ¨å®ç°æ„é€ å‡½æ•°æ—¶ä½¿ç”¨factoryå…³é”®å­—ï¼Œè¯¥æ„é€ å‡½æ•°å¹¶ä¸æ€»æ˜¯åˆ›å»ºç±»çš„æ–°å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œå·¥å‚æ„é€ å‡½æ•°å¯ä»¥ä»ç¼“å­˜è¿”å›å®ä¾‹ï¼Œä¹Ÿå¯ä»¥è¿”å›å­ç±»å‹çš„å®ä¾‹ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå·¥å‚æ„é€ å‡½æ•°ä»ç¼“å­˜è¿”å›å¯¹è±¡:

```
class Logger {
  final String name;
  bool mute = false;

  // _cache is library-private, thanks to
  // the _ in front of its name.
  static final Map<String, Logger> _cache =
      <String, Logger>{};

  factory Logger(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final logger = Logger._internal(name);
      _cache[name] = logger;
      return logger;
    }
  }

  Logger._internal(this.name);

  void log(String msg) {
    if (!mute) print(msg);
  }
}
```

> æ³¨æ„:å·¥å‚æ„é€ å‡½æ•°ä¸èƒ½è®¿é—®thiså…³é”®å­—ã€‚

è°ƒç”¨å·¥å‚æ„é€ å‡½æ•°ï¼Œå°±åƒè°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°ä¸€æ ·:

```
var logger = Logger('UI');
logger.log('Button clicked');
```


  

## 1.4.3 å¼‚æ­¥æ”¯æŒ

Dartç±»åº“æœ‰éå¸¸å¤šçš„è¿”å›`Future`æˆ–è€…`Stream`å¯¹è±¡çš„å‡½æ•°ã€‚ è¿™äº›å‡½æ•°è¢«ç§°ä¸º**å¼‚æ­¥å‡½æ•°**ï¼šå®ƒä»¬åªä¼šåœ¨è®¾ç½®å¥½ä¸€äº›è€—æ—¶æ“ä½œä¹‹åè¿”å›ï¼Œæ¯”å¦‚åƒ IOæ“ä½œã€‚è€Œä¸æ˜¯ç­‰åˆ°è¿™ä¸ªæ“ä½œå®Œæˆã€‚

`async`å’Œ`await`å…³é”®è¯æ”¯æŒäº†å¼‚æ­¥ç¼–ç¨‹ï¼Œå…è®¸æ‚¨å†™å‡ºå’ŒåŒæ­¥ä»£ç å¾ˆåƒçš„å¼‚æ­¥ä»£ç ã€‚

### Future

`Future`ä¸JavaScriptä¸­çš„`Promise`éå¸¸ç›¸ä¼¼ï¼Œè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼çš„è¡¨ç¤ºã€‚ç®€å•æ¥è¯´ï¼Œå®ƒå°±æ˜¯ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ï¼Œå¼‚æ­¥å¤„ç†æˆåŠŸäº†å°±æ‰§è¡ŒæˆåŠŸçš„æ“ä½œï¼Œå¼‚æ­¥å¤„ç†å¤±è´¥äº†å°±æ•è·é”™è¯¯æˆ–è€…åœæ­¢åç»­æ“ä½œã€‚ä¸€ä¸ªFutureåªä¼šå¯¹åº”ä¸€ä¸ªç»“æœï¼Œè¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚

ç”±äºæœ¬èº«åŠŸèƒ½è¾ƒå¤šï¼Œè¿™é‡Œæˆ‘ä»¬åªä»‹ç»å…¶å¸¸ç”¨çš„APIåŠç‰¹æ€§ã€‚è¿˜æœ‰ï¼Œè¯·è®°ä½ï¼Œ`Future` çš„æ‰€æœ‰APIçš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ª`Future`å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚

#### Future.then

ä¸ºäº†æ–¹ä¾¿ç¤ºä¾‹ï¼Œåœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨`Future.delayed` åˆ›å»ºäº†ä¸€ä¸ªå»¶æ—¶ä»»åŠ¡ï¼ˆå®é™…åœºæ™¯ä¼šæ˜¯ä¸€ä¸ªçœŸæ­£çš„è€—æ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œå³2ç§’åè¿”å›ç»“æœå­—ç¬¦ä¸²"hi world!"ï¼Œç„¶åæˆ‘ä»¬åœ¨`then`ä¸­æ¥æ”¶å¼‚æ­¥ç»“æœå¹¶æ‰“å°ç»“æœï¼Œä»£ç å¦‚ä¸‹ï¼š

```dart
Future.delayed(new Duration(seconds: 2),(){
   return "hi world!";
}).then((data){
   print(data);
});
```

#### Future.catchError

å¦‚æœå¼‚æ­¥ä»»åŠ¡å‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`catchError`ä¸­æ•è·é”™è¯¯ï¼Œæˆ‘ä»¬å°†ä¸Šé¢ç¤ºä¾‹æ”¹ä¸ºï¼š

```dart
Future.delayed(new Duration(seconds: 2),(){
   //return "hi world!";
   throw AssertionError("Error");  
}).then((data){
   //æ‰§è¡ŒæˆåŠŸä¼šèµ°åˆ°è¿™é‡Œ  
   print("success");
}).catchError((e){
   //æ‰§è¡Œå¤±è´¥ä¼šèµ°åˆ°è¿™é‡Œ  
   print(e);
});
```

åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­æŠ›å‡ºäº†ä¸€ä¸ªå¼‚å¸¸ï¼Œ`then`çš„å›è°ƒå‡½æ•°å°†ä¸ä¼šè¢«æ‰§è¡Œï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ `catchError`å›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ï¼›ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯åªæœ‰ `catchError`å›è°ƒæ‰èƒ½æ•è·é”™è¯¯ï¼Œ`then`æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°`onError`ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ƒæ¥æ•è·å¼‚å¸¸ï¼š

```dart
Future.delayed(new Duration(seconds: 2), () {
    //return "hi world!";
    throw AssertionError("Error");
}).then((data) {
    print("success");
}, onError: (e) {
    print(e);
});
```

#### Future.whenComplete

æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æ— è®ºå¼‚æ­¥ä»»åŠ¡æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥éƒ½éœ€è¦åšä¸€äº›äº‹çš„åœºæ™¯ï¼Œæ¯”å¦‚åœ¨ç½‘ç»œè¯·æ±‚å‰å¼¹å‡ºåŠ è½½å¯¹è¯æ¡†ï¼Œåœ¨è¯·æ±‚ç»“æŸåå…³é—­å¯¹è¯æ¡†ã€‚è¿™ç§åœºæ™¯ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ˜¯åˆ†åˆ«åœ¨`then`æˆ–`catch`ä¸­å…³é—­ä¸€ä¸‹å¯¹è¯æ¡†ï¼Œç¬¬äºŒç§å°±æ˜¯ä½¿ç”¨`Future`çš„`whenComplete`å›è°ƒï¼Œæˆ‘ä»¬å°†ä¸Šé¢ç¤ºä¾‹æ”¹ä¸€ä¸‹ï¼š

```dart
Future.delayed(new Duration(seconds: 2),(){
   //return "hi world!";
   throw AssertionError("Error");
}).then((data){
   //æ‰§è¡ŒæˆåŠŸä¼šèµ°åˆ°è¿™é‡Œ 
   print(data);
}).catchError((e){
   //æ‰§è¡Œå¤±è´¥ä¼šèµ°åˆ°è¿™é‡Œ   
   print(e);
}).whenComplete((){
   //æ— è®ºæˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šèµ°åˆ°è¿™é‡Œ
});
```

#### Future.wait

æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…å¤šä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡Œç»“æŸåæ‰è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªç•Œé¢ï¼Œéœ€è¦å…ˆåˆ†åˆ«ä»ä¸¤ä¸ªç½‘ç»œæ¥å£è·å–æ•°æ®ï¼Œè·å–æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªæ¥å£æ•°æ®è¿›è¡Œç‰¹å®šçš„å¤„ç†åå†æ˜¾ç¤ºåˆ°UIç•Œé¢ä¸Šï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿç­”æ¡ˆæ˜¯`Future.wait`ï¼Œå®ƒæ¥å—ä¸€ä¸ª`Future`æ•°ç»„å‚æ•°ï¼Œåªæœ‰æ•°ç»„ä¸­æ‰€æœ‰`Future`éƒ½æ‰§è¡ŒæˆåŠŸåï¼Œæ‰ä¼šè§¦å‘`then`çš„æˆåŠŸå›è°ƒï¼Œåªè¦æœ‰ä¸€ä¸ª`Future`æ‰§è¡Œå¤±è´¥ï¼Œå°±ä¼šè§¦å‘é”™è¯¯å›è°ƒã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡æ¨¡æ‹Ÿ`Future.delayed` æ¥æ¨¡æ‹Ÿä¸¤ä¸ªæ•°æ®è·å–çš„å¼‚æ­¥ä»»åŠ¡ï¼Œç­‰ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œå°†ä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœæ‹¼æ¥æ‰“å°å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š

```dart
Future.wait([
  // 2ç§’åè¿”å›ç»“æœ  
  Future.delayed(new Duration(seconds: 2), () {
    return "hello";
  }),
  // 4ç§’åè¿”å›ç»“æœ  
  Future.delayed(new Duration(seconds: 4), () {
    return " world";
  })
]).then((results){
  print(results[0]+results[1]);
}).catchError((e){
  print(e);
});
```

æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œ4ç§’åä½ ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°â€œhello worldâ€ã€‚

### Async/await

Dartä¸­çš„`async/await` å’ŒJavaScriptä¸­çš„`async/await`åŠŸèƒ½å’Œç”¨æ³•æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå¦‚æœä½ å·²ç»äº†è§£JavaScriptä¸­çš„`async/await`çš„ç”¨æ³•ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡æœ¬èŠ‚ã€‚

#### å›è°ƒåœ°ç‹±(Callback Hell)

å¦‚æœä»£ç ä¸­æœ‰å¤§é‡å¼‚æ­¥é€»è¾‘ï¼Œå¹¶ä¸”å‡ºç°å¤§é‡å¼‚æ­¥ä»»åŠ¡ä¾èµ–å…¶å®ƒå¼‚æ­¥ä»»åŠ¡çš„ç»“æœæ—¶ï¼Œå¿…ç„¶ä¼šå‡ºç°`Future.then`å›è°ƒä¸­å¥—å›è°ƒæƒ…å†µã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ç°åœ¨æœ‰ä¸ªéœ€æ±‚åœºæ™¯æ˜¯ç”¨æˆ·å…ˆç™»å½•ï¼Œç™»å½•æˆåŠŸåä¼šè·å¾—ç”¨æˆ·IDï¼Œç„¶åé€šè¿‡ç”¨æˆ·IDï¼Œå†å»è¯·æ±‚ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼Œè·å–åˆ°ç”¨æˆ·ä¸ªäººä¿¡æ¯åï¼Œä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ç¼“å­˜åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œä»£ç å¦‚ä¸‹ï¼š

```dart
//å…ˆåˆ†åˆ«å®šä¹‰å„ä¸ªå¼‚æ­¥ä»»åŠ¡
Future<String> login(String userName, String pwd){
    ...
    //ç”¨æˆ·ç™»å½•
};
Future<String> getUserInfo(String id){
    ...
    //è·å–ç”¨æˆ·ä¿¡æ¯ 
};
Future saveUserInfo(String userInfo){
    ...
    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯ 
};
```

æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œæ•´ä¸ªä»»åŠ¡æµï¼š

```dart
login("alice","******").then((id){
 //ç™»å½•æˆåŠŸåé€šè¿‡ï¼Œidè·å–ç”¨æˆ·ä¿¡æ¯    
 getUserInfo(id).then((userInfo){
    //è·å–ç”¨æˆ·ä¿¡æ¯åä¿å­˜ 
    saveUserInfo(userInfo).then((){
       //ä¿å­˜ç”¨æˆ·ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œå…¶å®ƒæ“ä½œ
        ...
    });
  });
})
```

å¯ä»¥æ„Ÿå—ä¸€ä¸‹ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘ä¸­æœ‰å¤§é‡å¼‚æ­¥ä¾èµ–çš„æƒ…å†µï¼Œå°†ä¼šå‡ºç°ä¸Šé¢è¿™ç§åœ¨å›è°ƒé‡Œé¢å¥—å›è°ƒçš„æƒ…å†µï¼Œè¿‡å¤šçš„åµŒå¥—ä¼šå¯¼è‡´çš„ä»£ç å¯è¯»æ€§ä¸‹é™ä»¥åŠå‡ºé”™ç‡æé«˜ï¼Œå¹¶ä¸”éå¸¸éš¾ç»´æŠ¤ï¼Œè¿™ä¸ªé—®é¢˜è¢«å½¢è±¡çš„ç§°ä¸º**å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰**ã€‚å›è°ƒåœ°ç‹±é—®é¢˜åœ¨ä¹‹å‰JavaScriptä¸­éå¸¸çªå‡ºï¼Œä¹Ÿæ˜¯JavaScriptè¢«åæ§½æœ€å¤šçš„ç‚¹ï¼Œä½†éšç€ECMAScript6å’ŒECMAScript7æ ‡å‡†å‘å¸ƒåï¼Œè¿™ä¸ªé—®é¢˜å¾—åˆ°äº†éå¸¸å¥½çš„è§£å†³ï¼Œè€Œè§£å†³å›è°ƒåœ°ç‹±çš„ä¸¤å¤§ç¥å™¨æ­£æ˜¯ECMAScript6å¼•å…¥äº†`Promise`ï¼Œä»¥åŠECMAScript7ä¸­å¼•å…¥çš„`async/await`ã€‚ è€Œåœ¨Dartä¸­å‡ ä¹æ˜¯å®Œå…¨å¹³ç§»äº†JavaScriptä¸­çš„è¿™ä¸¤è€…ï¼š`Future`ç›¸å½“äº`Promise`ï¼Œè€Œ`async/await`è¿åå­—éƒ½æ²¡æ”¹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹é€šè¿‡`Future`å’Œ`async/await`å¦‚ä½•æ¶ˆé™¤ä¸Šé¢ç¤ºä¾‹ä¸­çš„åµŒå¥—é—®é¢˜ã€‚

##### ä½¿ç”¨Futureæ¶ˆé™¤Callback Hell

```dart
login("alice","******").then((id){
      return getUserInfo(id);
}).then((userInfo){
    return saveUserInfo(userInfo);
}).then((e){
   //æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ 
}).catchError((e){
  //é”™è¯¯å¤„ç†  
  print(e);
});
```

æ­£å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œ *â€œFuture çš„æ‰€æœ‰APIçš„è¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œé“¾å¼è°ƒç”¨â€* ï¼Œå¦‚æœåœ¨thenä¸­è¿”å›çš„æ˜¯ä¸€ä¸ª`Future`çš„è¯ï¼Œè¯¥`future`ä¼šæ‰§è¡Œï¼Œæ‰§è¡Œç»“æŸåä¼šè§¦å‘åé¢çš„`then`å›è°ƒï¼Œè¿™æ ·ä¾æ¬¡å‘ä¸‹ï¼Œå°±é¿å…äº†å±‚å±‚åµŒå¥—ã€‚

##### ä½¿ç”¨async/awaitæ¶ˆé™¤callback hell

é€šè¿‡`Future`å›è°ƒä¸­å†è¿”å›`Future`çš„æ–¹å¼è™½ç„¶èƒ½é¿å…å±‚å±‚åµŒå¥—ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å±‚å›è°ƒï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿè®©æˆ‘ä»¬å¯ä»¥åƒå†™åŒæ­¥ä»£ç é‚£æ ·æ¥æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡è€Œä¸ä½¿ç”¨å›è°ƒçš„æ–¹å¼ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™å°±è¦ä½¿ç”¨`async/await`äº†ï¼Œä¸‹é¢æˆ‘ä»¬å…ˆç›´æ¥çœ‹ä»£ç ï¼Œç„¶åå†è§£é‡Šï¼Œä»£ç å¦‚ä¸‹ï¼š

```dart
task() async {
   try{
    String id = await login("alice","******");
    String userInfo = await getUserInfo(id);
    await saveUserInfo(userInfo);
    //æ‰§è¡Œæ¥ä¸‹æ¥çš„æ“ä½œ   
   } catch(e){
    //é”™è¯¯å¤„ç†   
    print(e);   
   }  
}
```

- `async`ç”¨æ¥è¡¨ç¤ºå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œå®šä¹‰çš„å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª`Future`å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨thenæ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚
- `await` åé¢æ˜¯ä¸€ä¸ª`Future`ï¼Œè¡¨ç¤ºç­‰å¾…è¯¥å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œå¼‚æ­¥å®Œæˆåæ‰ä¼šå¾€ä¸‹èµ°ï¼›`await`å¿…é¡»å‡ºç°åœ¨ `async` å‡½æ•°å†…éƒ¨ã€‚

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡`async/await`å°†ä¸€ä¸ªå¼‚æ­¥æµç”¨åŒæ­¥çš„ä»£ç è¡¨ç¤ºå‡ºæ¥äº†ã€‚

> å…¶å®ï¼Œæ— è®ºæ˜¯åœ¨JavaScriptè¿˜æ˜¯Dartä¸­ï¼Œ`async/await`éƒ½åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨æœ€ç»ˆéƒ½ä¼šå°†å…¶è½¬åŒ–ä¸ºä¸€ä¸ªPromiseï¼ˆFutureï¼‰çš„è°ƒç”¨é“¾ã€‚

## 1.4.4 Stream

`Stream` ä¹Ÿæ˜¯ç”¨äºæ¥æ”¶å¼‚æ­¥äº‹ä»¶æ•°æ®ï¼Œå’Œ`Future` ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡è§¦å‘æˆåŠŸæˆ–å¤±è´¥äº‹ä»¶æ¥ä¼ é€’ç»“æœæ•°æ®æˆ–é”™è¯¯å¼‚å¸¸ã€‚ `Stream` å¸¸ç”¨äºä¼šå¤šæ¬¡è¯»å–æ•°æ®çš„å¼‚æ­¥ä»»åŠ¡åœºæ™¯ï¼Œå¦‚ç½‘ç»œå†…å®¹ä¸‹è½½ã€æ–‡ä»¶è¯»å†™ç­‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

```dart
Stream.fromFutures([
  // 1ç§’åè¿”å›ç»“æœ
  Future.delayed(new Duration(seconds: 1), () {
    return "hello 1";
  }),
  // æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸
  Future.delayed(new Duration(seconds: 2),(){
    throw AssertionError("Error");
  }),
  // 3ç§’åè¿”å›ç»“æœ
  Future.delayed(new Duration(seconds: 3), () {
    return "hello 3";
  })
]).listen((data){
   print(data);
}, onError: (e){
   print(e.message);
},onDone: (){

});
```

ä¸Šé¢çš„ä»£ç ä¾æ¬¡ä¼šè¾“å‡ºï¼š

```
I/flutter (17666): hello 1
I/flutter (17666): Error
I/flutter (17666): hello 3
```

ä»£ç å¾ˆç®€å•ï¼Œå°±ä¸èµ˜è¿°äº†ã€‚

> æ€è€ƒé¢˜ï¼šæ—¢ç„¶Streamå¯ä»¥æ¥æ”¶å¤šæ¬¡äº‹ä»¶ï¼Œé‚£èƒ½ä¸èƒ½ç”¨Streamæ¥å®ç°ä¸€ä¸ªè®¢é˜…è€…æ¨¡å¼çš„äº‹ä»¶æ€»çº¿ï¼Ÿ

## 1.4.5 Dartå’ŒJavaåŠJavaScriptå¯¹æ¯”

é€šè¿‡ä¸Šé¢ä»‹ç»ï¼Œç›¸ä¿¡ä½ å¯¹Dartåº”è¯¥æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„å°è±¡ï¼Œç”±äºç¬”è€…å¹³æ—¶ä¹Ÿä½¿ç”¨Javaå’ŒJavaScriptï¼Œä¸‹é¢ç¬”è€…æ ¹æ®è‡ªå·±çš„ç»éªŒï¼Œç»“åˆJavaå’ŒJavaScriptï¼Œè°ˆä¸€ä¸‹è‡ªå·±çš„çœ‹æ³•ã€‚

> ä¹‹æ‰€ä»¥å°†Dartä¸Javaå’ŒJavaScriptå¯¹æ¯”ï¼Œæ˜¯å› ä¸ºï¼Œè¿™ä¸¤è€…åˆ†åˆ«æ˜¯å¼ºç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€çš„å…¸å‹ä»£è¡¨ï¼Œå¹¶ä¸”Dart è¯­æ³•ä¸­å¾ˆå¤šåœ°æ–¹ä¹Ÿéƒ½å€Ÿé‰´äº†Javaå’ŒJavaScriptã€‚

### Dart vs Java

å®¢è§‚çš„æ¥è®²ï¼ŒDartåœ¨è¯­æ³•å±‚é¢ç¡®å®æ¯”Javaæ›´æœ‰è¡¨ç°åŠ›ï¼›åœ¨VMå±‚é¢ï¼ŒDart VMåœ¨å†…å­˜å›æ”¶å’Œååé‡éƒ½è¿›è¡Œäº†åå¤çš„ä¼˜åŒ–ï¼Œä½†å…·ä½“çš„æ€§èƒ½å¯¹æ¯”ï¼Œç¬”è€…æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æµ‹è¯•æ•°æ®ï¼Œä½†åœ¨ç¬”è€…çœ‹æ¥ï¼Œåªè¦Dartè¯­è¨€èƒ½æµè¡Œï¼ŒVMçš„æ€§èƒ½å°±ä¸ç”¨æ‹…å¿ƒï¼Œæ¯•ç«ŸGoogleåœ¨Goï¼ˆæ²¡ç”¨VMä½†æœ‰GCï¼‰ã€JavaScriptï¼ˆv8ï¼‰ã€Dalvikï¼ˆAndroidä¸Šçš„Java VMï¼‰ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šæŠ€æœ¯ç§¯æ·€ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯Dartåœ¨Flutterä¸­å·²ç»å¯ä»¥å°†GCåšåˆ°10msä»¥å†…ï¼Œæ‰€ä»¥Dartå’ŒJavaç›¸æ¯”ï¼Œå†³èƒœå› ç´ å¹¶ä¸ä¼šæ˜¯åœ¨æ€§èƒ½æ–¹é¢ã€‚è€Œåœ¨è¯­æ³•å±‚é¢ï¼ŒDartè¦æ¯”Javaæ›´æœ‰è¡¨ç°åŠ›ï¼Œæœ€é‡è¦çš„æ˜¯Dartå¯¹å‡½æ•°å¼ç¼–ç¨‹æ”¯æŒè¦è¿œå¼ºäºJava(ç›®å‰åªåœç•™åœ¨Lambdaè¡¨è¾¾å¼)ï¼Œè€ŒDartç›®å‰çœŸæ­£çš„ä¸è¶³æ˜¯**ç”Ÿæ€**ï¼Œä½†ç¬”è€…ç›¸ä¿¡ï¼Œéšç€Flutterçš„é€æ¸ç«çƒ­ï¼Œä¼šå›è¿‡å¤´æ¥åæ¨Dartç”Ÿæ€åŠ é€Ÿå‘å±•ï¼Œå¯¹äºDartæ¥è¯´ï¼Œç°åœ¨éœ€è¦çš„æ˜¯æ—¶é—´ã€‚

### Dart vs JavaScript

JavaScriptçš„å¼±ç±»å‹ä¸€ç›´è¢«æŠ“çŸ­ï¼Œæ‰€ä»¥TypeScriptã€CoffeeScriptç”šè‡³æ˜¯Facebookçš„flowï¼ˆè™½ç„¶å¹¶ä¸èƒ½ç®—JavaScriptçš„ä¸€ä¸ªè¶…é›†ï¼Œä½†ä¹Ÿé€šè¿‡æ ‡æ³¨å’Œæ‰“åŒ…å·¥å…·æä¾›äº†é™æ€ç±»å‹æ£€æŸ¥ï¼‰æ‰æœ‰å¸‚åœºã€‚å°±ç¬”è€…ä½¿ç”¨è¿‡çš„è„šæœ¬è¯­è¨€ä¸­ï¼ˆç¬”è€…æ›¾ä½¿ç”¨è¿‡Pythonã€PHPï¼‰ï¼ŒJavaScriptæ— ç–‘æ˜¯**åŠ¨æ€åŒ–**æ”¯æŒæœ€å¥½çš„è„šæœ¬è¯­è¨€ï¼Œæ¯”å¦‚åœ¨JavaScriptä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å¯¹è±¡åœ¨ä»»ä½•æ—¶å€™åŠ¨æ€æ‰©å±•å±æ€§ï¼Œå¯¹äºç²¾é€šJavaScriptçš„é«˜æ‰‹æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€æŠŠåˆ©å‰‘ã€‚ä½†æ˜¯ï¼Œä»»ä½•äº‹ç‰©éƒ½æœ‰ä¸¤é¢æ€§ï¼ŒJavaScriptçš„å¼ºå¤§çš„åŠ¨æ€åŒ–ç‰¹æ€§ä¹Ÿæ˜¯æŠŠåŒåˆƒå‰‘ï¼Œä½ å¯ç»å¸¸å¬åˆ°å¦ä¸€ä¸ªå£°éŸ³ï¼Œè®¤ä¸ºJavaScriptçš„è¿™ç§åŠ¨æ€æ€§ç³Ÿç³•é€äº†ï¼Œå¤ªè¿‡çµæ´»åè€Œå¯¼è‡´ä»£ç å¾ˆéš¾é¢„æœŸï¼Œæ— æ³•é™åˆ¶ä¸è¢«æœŸæœ›çš„ä¿®æ”¹ã€‚æ¯•ç«Ÿæœ‰äº›äººæ€»æ˜¯å¯¹è‡ªå·±æˆ–åˆ«äººå†™çš„ä»£ç ä¸æ”¾å¿ƒï¼Œä»–ä»¬å¸Œæœ›èƒ½å¤Ÿè®©ä»£ç å˜å¾—å¯æ§ï¼Œå¹¶æœŸæœ›æœ‰ä¸€å¥—é™æ€ç±»å‹æ£€æŸ¥ç³»ç»Ÿæ¥å¸®åŠ©è‡ªå·±å‡å°‘é”™è¯¯ã€‚æ­£å› å¦‚æ­¤ï¼Œåœ¨Flutterä¸­ï¼ŒDartå‡ ä¹æ”¾å¼ƒäº†è„šæœ¬è¯­è¨€åŠ¨æ€åŒ–çš„ç‰¹æ€§ï¼Œå¦‚ä¸æ”¯æŒåå°„ã€ä¹Ÿä¸æ”¯æŒåŠ¨æ€åˆ›å»ºå‡½æ•°ç­‰ã€‚å¹¶ä¸”Dartåœ¨2.0å¼ºåˆ¶å¼€å¯äº†ç±»å‹æ£€æŸ¥ï¼ˆStrong Modeï¼‰ï¼ŒåŸå…ˆçš„æ£€æŸ¥æ¨¡å¼ï¼ˆchecked modeï¼‰å’Œå¯é€‰ç±»å‹ï¼ˆoptional typeï¼‰å°†æ·¡å‡ºï¼Œæ‰€ä»¥åœ¨ç±»å‹å®‰å…¨è¿™ä¸ªå±‚é¢æ¥è¯´ï¼ŒDartå’ŒTypeScriptã€CoffeeScriptæ˜¯å·®ä¸å¤šçš„ï¼Œæ‰€ä»¥å•ä»è¿™ä¸€ç‚¹æ¥çœ‹ï¼ŒDartå¹¶ä¸å…·å¤‡ä»€ä¹ˆæ˜æ˜¾ä¼˜åŠ¿ï¼Œä½†ç»¼åˆèµ·æ¥çœ‹ï¼ŒDartæ—¢èƒ½è¿›è¡ŒæœåŠ¡ç«¯è„šæœ¬ã€APPå¼€å‘ã€webå¼€å‘ï¼Œè¿™å°±æœ‰ä¼˜åŠ¿äº†ï¼

ç»¼ä¸Šæ‰€è¿°ï¼Œç¬”è€…è¿˜æ˜¯å¾ˆçœ‹å¥½Dartè¯­è¨€çš„å°†æ¥ï¼Œä¹‹æ‰€ä»¥è¡¨è¿™ä¸ªæ€ï¼Œæ˜¯å› ä¸ºåœ¨æ–°æŠ€æœ¯å‘å±•åˆæœŸï¼Œå¾ˆå¤šäººå¯èƒ½è¿˜æœ‰æ‰€æ‘‡æ‘†ï¼Œæœ‰æ‰€çŠ¹è±«ï¼Œæ‰€ä»¥æœ‰å¿…è¦ç»™å¤§å®¶æ‰“ä¸€å‰‚å¼ºå¿ƒé’ˆï¼Œå½“ç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªè§ä»è§æ™ºçš„é—®é¢˜ï¼Œå¤§å®¶å¯ä»¥å„æŠ’å·±è§ã€‚